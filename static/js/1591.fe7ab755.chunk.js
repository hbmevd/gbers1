"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[1591],{91612:function(t,r,e){e.d(r,{C:function(){return c}});var n=e(15671),a=e(43144),c=function(){function t(r){(0,n.Z)(this,t),this.contractWrapper=r}return(0,a.Z)(t,[{key:"overrideNextTransaction",value:function(t){this.contractWrapper.withTransactionOverride(t)}}]),t}()},25923:function(t,r,e){e.d(r,{D:function(){return A},e:function(){return q},f:function(){return z}});var n=e(93433),a=e(29439),c=e(1413),i=e(74165),s=e(15861),o=e(15671),u=e(43144),p=e(4942),l=e(81895),h=e(52009),f=e(19560),d=e(6321),m=e(91953),v=e(43414),x=e(16433),b=e(53792),g=e(48103),Z=e(35867),k=e(99094),y=e(70640),w=e(89806),W=e.n(w),C=e(43378),T=e(84546),M=e(17389),S=e(88034),P=e(56571),A=function(){function t(r,e,n){var a=this;(0,o.Z)(this,t),(0,p.Z)(this,"set",(0,Z.c)(function(){var t=a;return function(){var r=(0,s.Z)((0,i.Z)().mark((function r(e,n){var a,c=arguments;return(0,i.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=c.length>2&&void 0!==c[2]&&c[2],r.abrupt("return",t.setBatch.prepare([{tokenId:e,claimConditions:n}],a));case 2:case"end":return r.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}()}())),(0,p.Z)(this,"setBatch",(0,Z.c)(function(){var t=a;return function(){var r=(0,s.Z)((0,i.Z)().mark((function r(e){var n,a,o,u,p,f,d,m,v,x,g,k=arguments;return(0,i.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=k.length>1&&void 0!==k[1]&&k[1],a={},r.next=4,Promise.all(e.map(function(){var r=(0,s.Z)((0,i.Z)().mark((function r(e){var c,s,o,u,p,f;return(0,i.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=e.tokenId,s=e.claimConditions,o=s,!t.isLegacySinglePhaseDrop(t.contractWrapper)){r.next=10;break}if(n=!0,0!==s.length){r.next=8;break}o=[{startTime:new Date(0),currencyAddress:l.d,price:0,maxClaimableSupply:0,maxClaimablePerWallet:0,waitInSeconds:0,merkleRootHash:h.hexZeroPad([0],32),snapshot:[]}],r.next=10;break;case 8:if(!(s.length>1)){r.next=10;break}throw new Error("Single phase drop contract cannot have multiple claim conditions, only one is allowed");case 10:return(t.isNewSinglePhaseDrop(t.contractWrapper)||t.isNewMultiphaseDrop(t.contractWrapper))&&o.forEach((function(t){var r;if(t.snapshot&&t.snapshot.length>0&&(void 0===t.maxClaimablePerWallet||"unlimited"===t.maxClaimablePerWallet))throw new Error("maxClaimablePerWallet must be set to a specific value when an allowlist is set.\nSet it to 0 to only allow addresses in the allowlist to claim the amount specified in the allowlist.\n\nex:\ncontract.claimConditions.set(tokenId, [{ snapshot: [{ address: '0x...', maxClaimable: 1 }], maxClaimablePerWallet: 0 }])");if(t.snapshot&&t.snapshot.length>0&&"0"===(null===(r=t.maxClaimablePerWallet)||void 0===r?void 0:r.toString())&&0===t.snapshot.map((function(t){return"string"===typeof t?0:Number((null===(r=t.maxClaimable)||void 0===r?void 0:r.toString())||0);var r})).reduce((function(t,r){return t+r}),0))throw new Error("maxClaimablePerWallet is set to 0, and all addresses in the allowlist have max claimable 0. This means that no one can claim.")})),r.next=13,(0,C.D)(o,0,t.contractWrapper.getProvider(),t.storage,t.getSnapshotFormatVersion());case 13:return u=r.sent,p=u.snapshotInfos,f=u.sortedConditions,p.forEach((function(t){a[t.merkleRoot]=t.snapshotUri})),r.abrupt("return",{tokenId:c,sortedConditions:f});case 18:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()));case 4:return o=r.sent,r.next=7,t.metadata.get();case 7:for(u=r.sent,p=[],f=0,d=Object.keys(u.merkle||{});f<d.length;f++)m=d[f],a[m]=u.merkle[m];if(W()(u.merkle,a)){r.next=23;break}return r.next=13,t.metadata.parseInputMetadata((0,c.Z)((0,c.Z)({},u),{},{merkle:a}));case 13:return v=r.sent,r.next=16,t.metadata._parseAndUploadMetadata(v);case 16:if(x=r.sent,!(0,b.h)("setContractURI",t.contractWrapper)){r.next=22;break}g=new T.C(t.contractWrapper),p.push(g.encode("setContractURI",[x])),r.next=23;break;case 22:throw new Error("Setting a merkle root requires implementing ContractMetadata in your contract to support storing a merkle root.");case 23:if(o.forEach((function(r){var e=r.tokenId,a=r.sortedConditions,c=new T.C(t.contractWrapper);if(t.isLegacySinglePhaseDrop(t.contractWrapper)){var i=new T.C(t.contractWrapper);p.push(i.encode("setClaimConditions",[e,(0,C.E)(a[0]),n]))}else if(t.isLegacyMultiPhaseDrop(t.contractWrapper))p.push(c.encode("setClaimConditions",[e,a.map(C.E),n]));else if(t.isNewSinglePhaseDrop(t.contractWrapper))p.push(c.encode("setClaimConditions",[e,(0,C.F)(a[0]),n]));else{if(!t.isNewMultiphaseDrop(t.contractWrapper))throw new Error("Contract does not support claim conditions");p.push(c.encode("setClaimConditions",[e,a.map(C.F),n]))}})),!(0,b.h)("multicall",t.contractWrapper)){r.next=26;break}return r.abrupt("return",Z.T.fromContractWrapper({contractWrapper:t.contractWrapper,method:"multicall",args:[p]}));case 26:throw new Error("Contract does not support multicall");case 27:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}())),(0,p.Z)(this,"update",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e,n){var c,s;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.getAll(r);case 2:return c=t.sent,t.next=5,(0,C.H)(e,n,c);case 5:return s=t.sent,t.next=8,a.set.prepare(r,s);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),this.storage=n,this.contractWrapper=r,this.metadata=e}return(0,u.Z)(t,[{key:"getActive",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){var n,a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get(r);case 2:return n=t.sent,t.next=5,this.metadata.get();case 5:return a=t.sent,t.next=8,(0,C.v)(n,0,this.contractWrapper.getProvider(),a.merkle,this.storage,(null===e||void 0===e?void 0:e.withAllowList)||!1);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"get",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){var n,a,c,s,o,u;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isLegacySinglePhaseDrop(this.contractWrapper)){t.next=7;break}return t.next=3,this.contractWrapper.read("claimCondition",[r]);case 3:return n=t.sent,t.abrupt("return",(0,C.w)(n));case 7:if(!this.isLegacyMultiPhaseDrop(this.contractWrapper)){t.next=22;break}if(void 0===e){t.next=12;break}t.t0=e,t.next=15;break;case 12:return t.next=14,this.contractWrapper.read("getActiveClaimConditionId",[r]);case 14:t.t0=t.sent;case 15:return a=t.t0,t.next=18,this.contractWrapper.read("getClaimConditionById",[r,a]);case 18:return c=t.sent,t.abrupt("return",(0,C.w)(c));case 22:if(!this.isNewSinglePhaseDrop(this.contractWrapper)){t.next=29;break}return t.next=25,this.contractWrapper.read("claimCondition",[r]);case 25:return s=t.sent,t.abrupt("return",(0,C.x)(s));case 29:if(!this.isNewMultiphaseDrop(this.contractWrapper)){t.next=44;break}if(void 0===e){t.next=34;break}t.t1=e,t.next=37;break;case 34:return t.next=36,this.contractWrapper.read("getActiveClaimConditionId",[r]);case 36:t.t1=t.sent;case 37:return o=t.t1,t.next=40,this.contractWrapper.read("getClaimConditionById",[r,o]);case 40:return u=t.sent,t.abrupt("return",(0,C.x)(u));case 44:throw new Error("Contract does not support claim conditions");case 45:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"getAll",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){var n,a,c,s,o,u,p=this;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isLegacyMultiPhaseDrop(this.contractWrapper)&&!this.isNewMultiphaseDrop(this.contractWrapper)){t.next=23;break}return t.next=3,this.contractWrapper.read("claimCondition",[r]);case 3:n=t.sent,a=n.currentStartId.toNumber(),c=n.count.toNumber(),s=[],o=a;case 8:if(!(o<a+c)){t.next=17;break}return t.t0=s,t.next=12,this.get(r,o);case 12:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 14:o++,t.next=8;break;case 17:return t.next=19,this.metadata.get();case 19:return u=t.sent,t.abrupt("return",Promise.all(s.map((function(t){return(0,C.v)(t,0,p.contractWrapper.getProvider(),u.merkle,p.storage,(null===e||void 0===e?void 0:e.withAllowList)||!1)}))));case 23:return t.next=25,this.getActive(r,e);case 25:return t.t2=t.sent,t.abrupt("return",[t.t2]);case 27:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"canClaim",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e,n){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}return t.next=3,(0,v.aM)(n);case 3:n=t.sent;case 4:return t.next=6,this.getClaimIneligibilityReasons(r,e,n);case 6:return t.t0=t.sent.length,t.abrupt("return",0===t.t0);case 8:case"end":return t.stop()}}),t,this)})));return function(r,e,n){return t.apply(this,arguments)}}()},{key:"getClaimIneligibilityReasons",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,n,c){var s,o,u,p,l,m,x,b,g,Z,k,y,w,W,M,S,P,A,E,I,N,D,R,B,L,O,F;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=[],void 0!==c){t.next=11;break}return t.prev=2,t.next=5,this.contractWrapper.getSignerAddress();case 5:c=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.warn("failed to get signer address",t.t0);case 11:if(c){t.next=13;break}return t.abrupt("return",[C.C.NoWallet]);case 13:return t.next=15,(0,v.aM)(c);case 15:return p=t.sent,t.prev=16,t.next=19,this.getActive(r);case 19:u=t.sent,t.next=29;break;case 22:if(t.prev=22,t.t1=t.catch(16),!(0,v.B)(t.t1,"!CONDITION")&&!(0,v.B)(t.t1,"no active mint condition")){t.next=27;break}return s.push(C.C.NoClaimConditionSet),t.abrupt("return",s);case 27:return s.push(C.C.Unknown),t.abrupt("return",s);case 29:if("unlimited"===u.availableSupply){t.next=33;break}if(!f.O$.from(u.availableSupply).lt(n)){t.next=33;break}return s.push(C.C.NotEnoughSupply),t.abrupt("return",s);case 33:if(l=h.stripZeros(u.merkleRootHash),m=l.length>0,x=null,!m){t.next=104;break}return t.next=39,this.getClaimerProofs(r,p);case 39:if((x=t.sent)||!this.isLegacySinglePhaseDrop(this.contractWrapper)&&!this.isLegacyMultiPhaseDrop(this.contractWrapper)){t.next=43;break}return s.push(C.C.AddressNotAllowed),t.abrupt("return",s);case 43:if(!x){t.next=104;break}return t.prev=44,t.next=47,this.prepareClaim(r,n,!1,p);case 47:if(b=t.sent,!this.isLegacyMultiPhaseDrop(this.contractWrapper)){t.next=62;break}return t.next=51,this.contractWrapper.read("getActiveClaimConditionId",[r]);case 51:return o=t.sent,t.next=54,this.contractWrapper.read("verifyClaimMerkleProof",[o,p,r,n,b.proofs,b.maxClaimable]);case 54:if(g=t.sent,Z=(0,a.Z)(g,1),Z[0]){t.next=60;break}return s.push(C.C.AddressNotAllowed),t.abrupt("return",s);case 60:t.next=84;break;case 62:if(!this.isLegacySinglePhaseDrop(this.contractWrapper)){t.next=73;break}return t.next=65,this.contractWrapper.read("verifyClaimMerkleProof",[r,p,n,{proof:b.proofs,maxQuantityInAllowlist:b.maxClaimable}]);case 65:if(k=t.sent,y=(0,a.Z)(k,1),y[0]){t.next=71;break}return s.push(C.C.AddressNotAllowed),t.abrupt("return",s);case 71:t.next=84;break;case 73:if(!this.isNewSinglePhaseDrop(this.contractWrapper)){t.next=78;break}return t.next=76,this.contractWrapper.read("verifyClaim",[r,p,n,b.currencyAddress,b.price,{proof:b.proofs,quantityLimitPerWallet:b.maxClaimable,currency:b.currencyAddressInProof,pricePerToken:b.priceInProof}]);case 76:t.next=84;break;case 78:if(!this.isNewMultiphaseDrop(this.contractWrapper)){t.next=84;break}return t.next=81,this.contractWrapper.read("getActiveClaimConditionId",[r]);case 81:return o=t.sent,t.next=84,this.contractWrapper.read("verifyClaim",[o,p,r,n,b.currencyAddress,b.price,{proof:b.proofs,quantityLimitPerWallet:b.maxClaimable,currency:b.currencyAddressInProof,pricePerToken:b.priceInProof}]);case 84:t.next=104;break;case 86:t.prev=86,t.t2=t.catch(44),console.warn("Merkle proof verification failed:","reason"in t.t2?t.t2.reason:t.t2),w=t.t2.reason,t.t3=w,t.next="!Qty"===t.t3?93:"!PriceOrCurrency"===t.t3?95:"!MaxSupply"===t.t3?97:"cant claim yet"===t.t3?99:101;break;case 93:return s.push(C.C.OverMaxClaimablePerWallet),t.abrupt("break",103);case 95:return s.push(C.C.WrongPriceOrCurrency),t.abrupt("break",103);case 97:return s.push(C.C.NotEnoughSupply),t.abrupt("break",103);case 99:return s.push(C.C.ClaimPhaseNotStarted),t.abrupt("break",103);case 101:return s.push(C.C.AddressNotAllowed),t.abrupt("break",103);case 103:return t.abrupt("return",s);case 104:if(!this.isNewSinglePhaseDrop(this.contractWrapper)&&!this.isNewMultiphaseDrop(this.contractWrapper)){t.next=123;break}return W=f.O$.from(0),M=(0,C.y)(u.maxClaimablePerWallet,0),t.prev=107,t.next=110,this.getSupplyClaimedByWallet(r,p);case 110:W=t.sent,t.next=115;break;case 113:t.prev=113,t.t4=t.catch(107);case 115:if(x&&(M=(0,C.y)(x.maxClaimable,0)),!M.gt(0)||!M.lt(W.add(n))){t.next=119;break}return s.push(C.C.OverMaxClaimablePerWallet),t.abrupt("return",s);case 119:if(m&&(!m||x)){t.next=123;break}if(!M.lte(W)&&!M.eq(0)){t.next=123;break}return s.push(C.C.AddressNotAllowed),t.abrupt("return",s);case 123:if(S=[f.O$.from(0),f.O$.from(0)],P=S[0],A=S[1],!this.isLegacyMultiPhaseDrop(this.contractWrapper)){t.next=136;break}return t.next=127,this.contractWrapper.read("getActiveClaimConditionId",[r]);case 127:return o=t.sent,t.next=130,this.contractWrapper.read("getClaimTimestamp",[r,o,p]);case 130:E=t.sent,I=(0,a.Z)(E,2),P=I[0],A=I[1],t.next=143;break;case 136:if(!this.isLegacySinglePhaseDrop(this.contractWrapper)){t.next=143;break}return t.next=139,this.contractWrapper.read("getClaimTimestamp",[r,p]);case 139:N=t.sent,D=(0,a.Z)(N,2),P=D[0],A=D[1];case 143:if(R=f.O$.from(Date.now()).div(1e3),!P.gt(0)||!R.lt(A)){t.next=147;break}return A.eq(d.Bz)?s.push(C.C.AlreadyClaimed):s.push(C.C.WaitBeforeNextClaimTransaction),t.abrupt("return",s);case 147:if(!u.price.gt(0)||!(0,v.d4)()){t.next=165;break}if(B=u.price.mul(n),L=this.contractWrapper.getProvider(),!(0,T.i)(u.currencyAddress)){t.next=157;break}return t.next=153,L.getBalance(p);case 153:t.sent.lt(B)&&s.push(C.C.NotEnoughTokens),t.next=165;break;case 157:return t.next=159,Promise.resolve().then(e.t.bind(e,49242,19));case 159:return O=t.sent.default,F=new v.cr(L,u.currencyAddress,O,{},this.storage),t.next=163,F.read("balanceOf",[p]);case 163:t.sent.lt(B)&&s.push(C.C.NotEnoughTokens);case 165:return t.abrupt("return",s);case 166:case"end":return t.stop()}}),t,this,[[2,8],[16,22],[44,86],[107,113]])})));return function(r,e,n){return t.apply(this,arguments)}}()},{key:"getClaimerProofs",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e,n){var a,c,s,o;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get(r,n);case 2:if(a=t.sent,c=a.merkleRoot,!(h.stripZeros(c).length>0)){t.next=17;break}return t.next=8,this.metadata.get();case 8:return s=t.sent,t.next=11,(0,v.aM)(e);case 11:return o=t.sent,t.next=14,(0,C.f)(o,c.toString(),s.merkle,this.contractWrapper.getProvider(),this.storage,this.getSnapshotFormatVersion());case 14:return t.abrupt("return",t.sent);case 17:return t.abrupt("return",null);case 18:case"end":return t.stop()}}),t,this)})));return function(r,e,n){return t.apply(this,arguments)}}()},{key:"getSupplyClaimedByWallet",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){var n,a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,v.aM)(e);case 2:if(n=t.sent,!this.isNewSinglePhaseDrop(this.contractWrapper)){t.next=7;break}return t.next=6,this.contractWrapper.read("getSupplyClaimedByWallet",[r,n]);case 6:case 13:return t.abrupt("return",t.sent);case 7:if(!this.isNewMultiphaseDrop(this.contractWrapper)){t.next=14;break}return t.next=10,this.contractWrapper.read("getActiveClaimConditionId",[r]);case 10:return a=t.sent,t.next=13,this.contractWrapper.read("getSupplyClaimedByWallet",[r,a,n]);case 14:throw new Error("This contract does not support the getSupplyClaimedByWallet function");case 15:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"prepareClaim",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e,n,a){var c,o=this;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=v.aM,!a){t.next=5;break}t.t1=a,t.next=8;break;case 5:return t.next=7,this.contractWrapper.getSignerAddress();case 7:t.t1=t.sent;case 8:return t.t2=t.t1,t.next=11,(0,t.t0)(t.t2);case 11:return c=t.sent,t.t3=C.z,t.t4=c,t.t5=e,t.next=17,this.getActive(r);case 17:return t.t6=t.sent,t.t7=(0,s.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.metadata.get();case 2:return t.abrupt("return",t.sent.merkle);case 3:case"end":return t.stop()}}),t)}))),t.t8=this.contractWrapper,t.t9=this.storage,t.t10=n,t.t11=this.getSnapshotFormatVersion(),t.abrupt("return",(0,t.t3)(t.t4,t.t5,t.t6,t.t7,0,t.t8,t.t9,t.t10,t.t11));case 24:case"end":return t.stop()}}),t,this)})));return function(r,e,n,a){return t.apply(this,arguments)}}()},{key:"getClaimArguments",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e,n,a){var c;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,v.aM)(e);case 2:if(c=t.sent,!this.isLegacyMultiPhaseDrop(this.contractWrapper)){t.next=7;break}return t.abrupt("return",[c,r,n,a.currencyAddress,a.price,a.proofs,a.maxClaimable]);case 7:if(!this.isLegacySinglePhaseDrop(this.contractWrapper)){t.next=9;break}return t.abrupt("return",[c,r,n,a.currencyAddress,a.price,{proof:a.proofs,maxQuantityInAllowlist:a.maxClaimable},m.Y0("")]);case 9:return t.abrupt("return",[c,r,n,a.currencyAddress,a.price,{proof:a.proofs,quantityLimitPerWallet:a.maxClaimable,pricePerToken:a.priceInProof,currency:a.currencyAddressInProof},m.Y0("")]);case 10:case"end":return t.stop()}}),t,this)})));return function(r,e,n,a){return t.apply(this,arguments)}}()},{key:"getClaimTransaction",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e,n,a){var c;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===a||void 0===a||!a.pricePerToken){t.next=2;break}throw new Error("Price per token should be set via claim conditions by calling `contract.erc1155.claimConditions.set()`");case 2:return t.next=4,this.prepareClaim(e,n,(null===a||void 0===a?void 0:a.checkERC20Allowance)||!0);case 4:return c=t.sent,t.t0=Z.T,t.t1=this.contractWrapper,t.next=9,this.getClaimArguments(e,r,n,c);case 9:return t.t2=t.sent,t.t3=c.overrides,t.t4={contractWrapper:t.t1,method:"claim",args:t.t2,overrides:t.t3},t.abrupt("return",t.t0.fromContractWrapper.call(t.t0,t.t4));case 13:case"end":return t.stop()}}),t,this)})));return function(r,e,n,a){return t.apply(this,arguments)}}()},{key:"isNewSinglePhaseDrop",value:function(t){return(0,b.d)(t,"ERC1155ClaimConditionsV2")}},{key:"isNewMultiphaseDrop",value:function(t){return(0,b.d)(t,"ERC1155ClaimPhasesV2")}},{key:"isLegacySinglePhaseDrop",value:function(t){return(0,b.d)(t,"ERC1155ClaimConditionsV1")}},{key:"isLegacyMultiPhaseDrop",value:function(t){return(0,b.d)(t,"ERC1155ClaimPhasesV1")}},{key:"getSnapshotFormatVersion",value:function(){return this.isLegacyMultiPhaseDrop(this.contractWrapper)||this.isLegacySinglePhaseDrop(this.contractWrapper)?C.A.V1:C.A.V2}}]),t}(),E=(0,u.Z)((function t(r,e,n){var a=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",v.d5.name),(0,p.Z)(this,"to",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){var n,c,o,u,p,l;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.map((function(t){return t.metadata})),c=e.map((function(t){return t.supply})),t.next=4,(0,g.u)(n,a.storage);case 4:return o=t.sent,t.next=7,(0,v.aM)(r);case 7:return u=t.sent,p=new T.C(a.contractWrapper),t.next=11,Promise.all(o.map(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",p.encode("mintTo",[u,d.Bz,r,c[e]]));case 1:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}()));case 11:return l=t.sent,t.abrupt("return",Z.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"multicall",args:[l],parse:function(t){var r=a.contractWrapper.parseLogs("TokensMinted",t.logs);if(0===r.length||r.length<n.length)throw new Error("TokenMinted event not found, minting failed");return r.map((function(r){var e=r.args.tokenIdMinted;return{id:e,receipt:t,data:function(){return a.erc1155.get(e)}}}))}}));case 13:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),this.erc1155=r,this.contractWrapper=e,this.storage=n})),I=(0,u.Z)((function t(r){var e=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",v.d6.name),(0,p.Z)(this,"tokens",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,n){var a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.contractWrapper.getSignerAddress();case 2:return a=t.sent,t.abrupt("return",e.from.prepare(a,r,n));case 4:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,p.Z)(this,"from",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,n,a){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Z.T,t.t1=e.contractWrapper,t.next=4,(0,v.aM)(r);case 4:return t.t2=t.sent,t.t3=n,t.t4=a,t.t5=[t.t2,t.t3,t.t4],t.t6={contractWrapper:t.t1,method:"burn",args:t.t5},t.abrupt("return",t.t0.fromContractWrapper.call(t.t0,t.t6));case 10:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),(0,p.Z)(this,"batch",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,n){var a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.contractWrapper.getSignerAddress();case 2:return a=t.sent,t.abrupt("return",e.batchFrom.prepare(a,r,n));case 4:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,p.Z)(this,"batchFrom",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,n,a){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Z.T,t.t1=e.contractWrapper,t.next=4,(0,v.aM)(r);case 4:return t.t2=t.sent,t.t3=n,t.t4=a,t.t5=[t.t2,t.t3,t.t4],t.t6={contractWrapper:t.t1,method:"burnBatch",args:t.t5},t.abrupt("return",t.t0.fromContractWrapper.call(t.t0,t.t6));case 10:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),this.contractWrapper=r})),N=function(){function t(r,e){(0,o.Z)(this,t),(0,p.Z)(this,"featureName",v.d7.name),this.erc1155=r,this.contractWrapper=e}return(0,u.Z)(t,[{key:"all",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){var e,a,c,s=this;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=f.O$.from((null===r||void 0===r?void 0:r.start)||0).toNumber(),a=f.O$.from((null===r||void 0===r?void 0:r.count)||g.D).toNumber(),t.t0=Math,t.next=5,this.totalCount();case 5:return t.t1=t.sent.toNumber(),t.t2=e+a,c=t.t0.min.call(t.t0,t.t1,t.t2),t.next=10,Promise.all((0,n.Z)(Array(c-e).keys()).map((function(t){return s.erc1155.get((e+t).toString())})));case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"totalCount",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.read("nextTokenIdToMint",[]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"totalCirculatingSupply",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.read("totalSupply",[r]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"owned",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){var n,s,o,u,p,l,h,f,d,m=this;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=Promise,t.t1=v.aM,t.t2=r,t.t2){t.next=7;break}return t.next=6,this.contractWrapper.getSignerAddress();case 6:t.t2=t.sent;case 7:return t.t3=t.t2,t.t4=(0,t.t1)(t.t3),t.t5=this.contractWrapper.read("nextTokenIdToMint",[]),t.t6=[t.t4,t.t5],t.next=13,t.t0.all.call(t.t0,t.t6);case 13:return n=t.sent,s=(0,a.Z)(n,2),o=s[0],u=s[1],t.next=19,this.contractWrapper.read("balanceOfBatch",[Array(u.toNumber()).fill(o),Array.from(Array(u.toNumber()).keys())]);case 19:return p=t.sent,l=p.map((function(t,r){return{tokenId:r,balance:t}})).filter((function(t){return t.balance.gt(0)})),e&&(h=(null===e||void 0===e?void 0:e.start)||0,f=(null===e||void 0===e?void 0:e.count)||g.D,l=l.slice(h,h+f)),t.next=24,Promise.all(l.map((function(t){return m.erc1155.get(t.tokenId.toString())})));case 24:return d=t.sent.map((function(t,r){return(0,c.Z)((0,c.Z)({},t),{},{owner:o,quantityOwned:l[r].balance.toString()})})),t.abrupt("return",d);case 26:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()}]),t}(),D=function(){function t(r,e,n){var a=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",v.d8.name),(0,p.Z)(this,"lazyMint",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){var n,c,s,o,u,p,l;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.erc1155.nextTokenIdToMint();case 2:return n=t.sent,t.next=5,(0,g.u)(r,a.storage,n.toNumber(),e);case 5:c=t.sent,s=c[0].substring(0,c[0].lastIndexOf("/")),o=0;case 8:if(!(o<c.length)){t.next=15;break}if(u=c[o].substring(0,c[o].lastIndexOf("/")),s===u){t.next=12;break}throw new Error("Can only create batches with the same base URI for every entry in the batch. Expected '".concat(s,"' but got '").concat(u,"'"));case 12:o++,t.next=8;break;case 15:return p=function(t){for(var r=a.contractWrapper.parseLogs("TokensLazyMinted",null===t||void 0===t?void 0:t.logs),e=r[0].args.startTokenId,n=r[0].args.endTokenId,c=[],i=function(r){c.push({id:r,receipt:t,data:function(){return a.erc1155.getTokenMetadata(r)}})},s=e;s.lte(n);s=s.add(1))i(s);return c},t.next=18,(0,v.da)(a.contractWrapper.address,a.contractWrapper.getProvider());case 18:if(l=t.sent,!a.isLegacyEditionDropContract(a.contractWrapper,l)){t.next=23;break}return t.abrupt("return",Z.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"lazyMint",args:[c.length,"".concat(s.endsWith("/")?s:"".concat(s,"/"))],parse:p}));case 23:return t.abrupt("return",Z.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"lazyMint",args:[c.length,"".concat(s.endsWith("/")?s:"".concat(s,"/")),m.Y0("")],parse:p}));case 24:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),this.erc1155=r,this.contractWrapper=e,this.storage=n,this.revealer=this.detectErc1155Revealable()}return(0,u.Z)(t,[{key:"detectErc1155Revealable",value:function(){var t=this;if((0,b.d)(this.contractWrapper,"ERC1155Revealable"))return new y.D(this.contractWrapper,this.storage,v.d9.name,(function(){return t.erc1155.nextTokenIdToMint()}))}},{key:"isLegacyEditionDropContract",value:function(t,r){return r&&"DropERC1155"===r.type&&r.version<3||!1}}]),t}(),R=function(){function t(r,e,n){var a=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",v.db.name),(0,p.Z)(this,"to",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.getMintTransaction(r,e);case 2:return(n=t.sent).setParse((function(t){var r=a.contractWrapper.parseLogs("TransferSingle",null===t||void 0===t?void 0:t.logs);if(0===r.length)throw new Error("TransferSingleEvent event not found");var e=r[0].args.id;return{id:e,receipt:t,data:function(){return a.erc1155.get(e.toString())}}})),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,p.Z)(this,"additionalSupplyTo",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e,n){var c;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.erc1155.getTokenMetadata(e);case 2:return c=t.sent,t.t0=Z.T,t.t1=a.contractWrapper,t.next=7,(0,v.aM)(r);case 7:return t.t2=t.sent,t.t3=e,t.t4=c.uri,t.t5=n,t.t6=[t.t2,t.t3,t.t4,t.t5],t.t7=function(t){return{id:f.O$.from(e),receipt:t,data:function(){return a.erc1155.get(e)}}},t.t8={contractWrapper:t.t1,method:"mintTo",args:t.t6,parse:t.t7},t.abrupt("return",t.t0.fromContractWrapper.call(t.t0,t.t8));case 15:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),this.erc1155=r,this.contractWrapper=e,this.storage=n,this.batch=this.detectErc1155BatchMintable()}return(0,u.Z)(t,[{key:"getMintTransaction",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.b)(e.metadata,this.storage);case 2:return n=t.sent,t.t0=Z.T,t.t1=this.contractWrapper,t.next=7,(0,v.aM)(r);case 7:return t.t2=t.sent,t.t3=d.Bz,t.t4=n,t.t5=e.supply,t.t6=[t.t2,t.t3,t.t4,t.t5],t.t7={contractWrapper:t.t1,method:"mintTo",args:t.t6},t.abrupt("return",t.t0.fromContractWrapper.call(t.t0,t.t7));case 14:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"detectErc1155BatchMintable",value:function(){if((0,b.d)(this.contractWrapper,"ERC1155BatchMintable"))return new E(this.erc1155,this.contractWrapper,this.storage)}}]),t}(),B=function(){return k.z.object({address:v.b9,quantity:v.cw.default(1)})}(),L=function(){return k.z.union([k.z.array(k.z.string()).transform(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(r.map((function(t){return B.parseAsync({address:t})})));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}()),k.z.array(B)])}(),O=function(){function t(r){var e=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",v.dc.name),(0,p.Z)(this,"to",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,n,a,c){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getClaimTransaction(r,n,a,c);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(r,e,n,a){return t.apply(this,arguments)}}())),this.contractWrapper=r}return(0,u.Z)(t,[{key:"getClaimTransaction",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e,n,a){var c;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c={},!a||!a.pricePerToken){t.next=5;break}return t.next=4,(0,y.c)(this.contractWrapper,a.pricePerToken,n,a.currencyAddress,a.checkERC20Allowance);case 4:c=t.sent;case 5:return t.t0=Z.T,t.t1=this.contractWrapper,t.next=9,(0,v.aM)(r);case 9:return t.t2=t.sent,t.t3=e,t.t4=n,t.t5=[t.t2,t.t3,t.t4],t.t6=c,t.t7={contractWrapper:t.t1,method:"claim",args:t.t5,overrides:t.t6},t.abrupt("return",t.t0.fromContractWrapper.call(t.t0,t.t7));case 16:case"end":return t.stop()}}),t,this)})));return function(r,e,n,a){return t.apply(this,arguments)}}()}]),t}(),F=(0,u.Z)((function t(r,e){var n=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",v.dd.name),(0,p.Z)(this,"to",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e,a,c){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.conditions.getClaimTransaction(r,e,a,c);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(r,e,n,a){return t.apply(this,arguments)}}())),this.contractWrapper=r,this.storage=e;var a=new b.C(this.contractWrapper,v.bg,this.storage);this.conditions=new A(r,a,this.storage)})),z=function(){function t(r,e,n){var c=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",v.de.name),(0,p.Z)(this,"mint",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){var e,n,s,o,u,p;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.payload,n=r.signature,t.next=4,Promise.all([c.mapPayloadToContractStruct(e),c.contractWrapper.getCallOverrides()]);case 4:return s=t.sent,o=(0,a.Z)(s,2),u=o[0],p=o[1],t.next=10,(0,P.s)(c.contractWrapper,u.pricePerToken.mul(u.quantity),e.currencyAddress,p);case 10:return t.abrupt("return",Z.T.fromContractWrapper({contractWrapper:c.contractWrapper,method:"mintWithSignature",args:[u,n],overrides:p,parse:function(t){var r=c.contractWrapper.parseLogs("TokensMintedWithSignature",t.logs);if(0===r.length)throw new Error("No MintWithSignature event found");return{id:r[0].args.tokenIdMinted,receipt:t}}}));case 11:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),(0,p.Z)(this,"mintBatch",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){var e,n,a,s;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(r.map((function(t){return c.mapPayloadToContractStruct(t.payload)})));case 2:if(e=t.sent,n=r.map((function(t,r){var n=e[r],a=t.signature,c=t.payload.price;if(f.O$.from(c).gt(0))throw new Error("Can only batch free mints. For mints with a price, use regular mint()");return{message:n,signature:a}})),a=new T.C(c.contractWrapper),s=n.map((function(t){return a.encode("mintWithSignature",[t.message,t.signature])})),!(0,b.h)("multicall",c.contractWrapper)){t.next=10;break}return t.abrupt("return",Z.T.fromContractWrapper({contractWrapper:c.contractWrapper,method:"multicall",args:[s],parse:function(t){var r=c.contractWrapper.parseLogs("TokensMintedWithSignature",t.logs);if(0===r.length)throw new Error("No MintWithSignature event found");return r.map((function(r){return{id:r.args.tokenIdMinted,receipt:t}}))}}));case 10:throw new Error("Multicall not supported on this contract!");case 11:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),this.contractWrapper=r,this.storage=e,this.roles=n}return(0,u.Z)(t,[{key:"verify",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){var e,n,a,c;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.payload,n=r.signature,t.next=4,this.mapPayloadToContractStruct(e);case 4:return a=t.sent,t.next=7,this.contractWrapper.read("verify",[a,n]);case 7:return c=t.sent,t.abrupt("return",c[0]);case 9:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"generate",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,c.Z)((0,c.Z)({},r),{},{tokenId:d.Bz}),t.abrupt("return",this.generateFromTokenId(e));case 2:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"generateFromTokenId",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.generateBatchFromTokenIds([r]);case 2:return e=t.sent,t.abrupt("return",e[0]);case 4:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"generateBatch",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.map((function(t){return(0,c.Z)((0,c.Z)({},t),{},{tokenId:d.Bz})})),t.abrupt("return",this.generateBatchFromTokenIds(e));case 2:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"generateBatchFromTokenIds",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){var e,n,s,o,u,p,l,h,f,d,m,x,b,Z=this;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.contractWrapper.getSigner(),(0,M.Z)(n,"No signer available"),null!==(e=this.roles)&&void 0!==e){t.next=6;break}t.t0=void 0,t.next=12;break;case 6:return t.t1=e,t.t2=["minter"],t.next=10,n.getAddress();case 10:t.t3=t.sent,t.t0=t.t1.verify.call(t.t1,t.t2,t.t3);case 12:return t.next=14,t.t0;case 14:return t.next=16,Promise.all(r.map((function(t){return C.o.parseAsync(t)})));case 16:return s=t.sent,o=s.map((function(t){return t.metadata})),t.next=20,Promise.all([(0,g.u)(o,this.storage),this.contractWrapper.getChainID(),(0,v.da)(this.contractWrapper.address,this.contractWrapper.getProvider())]);case 20:return u=t.sent,p=(0,a.Z)(u,3),l=p[0],h=p[1],f=p[2],t.next=27,Promise.all(s.map((function(t,r){return C.p.parseAsync((0,c.Z)((0,c.Z)({},t),{},{uri:l[r]}))})));case 27:return d=t.sent,t.next=30,Promise.all(d.map((function(t){return Z.mapPayloadToContractStruct(t)})));case 30:return m=t.sent,x="TokenERC1155"===(null===f||void 0===f?void 0:f.type),t.next=34,Promise.all(m.map((function(t){return Z.contractWrapper.signTypedData(n,{name:x?"TokenERC1155":"SignatureMintERC1155",version:"1",chainId:h,verifyingContract:Z.contractWrapper.address},{MintRequest:C.t},t)})));case 34:return b=t.sent,t.abrupt("return",b.map((function(t,r){return{payload:d[r],signature:t.toString()}})));case 36:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"mapPayloadToContractStruct",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,S.n)(this.contractWrapper.getProvider(),r.price,r.currencyAddress);case 2:return e=t.sent,t.abrupt("return",{to:r.to,tokenId:r.tokenId,uri:r.uri,quantity:r.quantity,pricePerToken:e,currency:r.currencyAddress,validityStartTimestamp:r.mintStartTime,validityEndTimestamp:r.mintEndTime,uid:r.uid,royaltyRecipient:r.royaltyRecipient,royaltyBps:r.royaltyBps,primarySaleRecipient:r.primarySaleRecipient});case 4:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()}]),t}(),q=function(){function t(r,e,n){var a=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",v.df.name),(0,p.Z)(this,"transfer",(0,Z.c)(function(){var t=a;return function(){var r=(0,s.Z)((0,i.Z)().mark((function r(e,n,a){var c,s,o=arguments;return(0,i.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=o.length>3&&void 0!==o[3]?o[3]:[0],r.next=3,t.contractWrapper.getSignerAddress();case 3:return s=r.sent,r.t0=Z.T,r.t1=t.contractWrapper,r.t2=s,r.next=9,(0,v.aM)(e);case 9:return r.t3=r.sent,r.t4=n,r.t5=a,r.t6=c,r.t7=[r.t2,r.t3,r.t4,r.t5,r.t6],r.t8={contractWrapper:r.t1,method:"safeTransferFrom",args:r.t7},r.abrupt("return",r.t0.fromContractWrapper.call(r.t0,r.t8));case 16:case"end":return r.stop()}}),r)})));return function(t,e,n){return r.apply(this,arguments)}}()}())),(0,p.Z)(this,"transferFrom",(0,Z.c)(function(){var t=a;return function(){var r=(0,s.Z)((0,i.Z)().mark((function r(e,n,a,c){var s,o=arguments;return(0,i.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=o.length>4&&void 0!==o[4]?o[4]:[0],r.t0=Z.T,r.t1=t.contractWrapper,r.next=5,(0,v.aM)(e);case 5:return r.t2=r.sent,r.next=8,(0,v.aM)(n);case 8:return r.t3=r.sent,r.t4=a,r.t5=c,r.t6=s,r.t7=[r.t2,r.t3,r.t4,r.t5,r.t6],r.t8={contractWrapper:r.t1,method:"safeTransferFrom",args:r.t7},r.abrupt("return",r.t0.fromContractWrapper.call(r.t0,r.t8));case 15:case"end":return r.stop()}}),r)})));return function(t,e,n,a){return r.apply(this,arguments)}}()}())),(0,p.Z)(this,"setApprovalForAll",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Z.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"setApprovalForAll",args:[r,e]}));case 1:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,p.Z)(this,"airdrop",(0,Z.c)(function(){var t=a;return function(){var r=(0,s.Z)((0,i.Z)().mark((function r(e,n,a){var c,s,o,u,p,l,h,d=arguments;return(0,i.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=d.length>3&&void 0!==d[3]?d[3]:[0],!a){r.next=7;break}return r.next=4,(0,v.aM)(a);case 4:r.t0=r.sent,r.next=10;break;case 7:return r.next=9,t.contractWrapper.getSignerAddress();case 9:r.t0=r.sent;case 10:return s=r.t0,r.next=13,t.balanceOf(s,e);case 13:return o=r.sent,r.next=16,L.parseAsync(n);case 16:if(u=r.sent,p=u.reduce((function(t,r){return f.O$.from(t).add(f.O$.from((null===r||void 0===r?void 0:r.quantity)||1))}),f.O$.from(0)),!o.lt(f.O$.from(p))){r.next=20;break}throw new Error("The caller owns ".concat(o.toString()," NFTs, but wants to airdrop ").concat(p.toString()," NFTs."));case 20:return l=new T.C(t.contractWrapper),h=u.map((function(t){var r=t.address,n=t.quantity;return l.encode("safeTransferFrom",[s,r,e,n,c])})),r.abrupt("return",Z.T.fromContractWrapper({contractWrapper:t.contractWrapper,method:"multicall",args:[h]}));case 23:case"end":return r.stop()}}),r)})));return function(t,e,n){return r.apply(this,arguments)}}()}())),(0,p.Z)(this,"mint",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a.mintTo,t.next=3,a.contractWrapper.getSignerAddress();case 3:return t.t1=t.sent,t.t2=r,t.abrupt("return",t.t0.prepare.call(t.t0,t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),(0,p.Z)(this,"mintTo",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,x.a)(a.mintable,v.db).to.prepare(r,e));case 1:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,p.Z)(this,"mintAdditionalSupply",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=(0,x.a)(a.mintable,v.db).additionalSupplyTo,t.next=3,a.contractWrapper.getSignerAddress();case 3:return t.t1=t.sent,t.t2=r,t.t3=e,t.abrupt("return",t.t0.prepare.call(t.t0,t.t1,t.t2,t.t3));case 7:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,p.Z)(this,"mintAdditionalSupplyTo",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e,n){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,x.a)(a.mintable,v.db).additionalSupplyTo.prepare(r,e,n));case 1:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),(0,p.Z)(this,"mintBatch",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a.mintBatchTo,t.next=3,a.contractWrapper.getSignerAddress();case 3:return t.t1=t.sent,t.t2=r,t.abrupt("return",t.t0.prepare.call(t.t0,t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),(0,p.Z)(this,"mintBatchTo",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,x.a)(null===(n=a.mintable)||void 0===n?void 0:n.batch,v.d5).to.prepare(r,e));case 1:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,p.Z)(this,"burn",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,x.a)(a.burnable,v.d6).tokens.prepare(r,e));case 1:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,p.Z)(this,"burnFrom",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e,n){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,x.a)(a.burnable,v.d6).from.prepare(r,e,n));case 1:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),(0,p.Z)(this,"burnBatch",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,x.a)(a.burnable,v.d6).batch.prepare(r,e));case 1:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,p.Z)(this,"burnBatchFrom",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e,n){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,x.a)(a.burnable,v.d6).batchFrom.prepare(r,e,n));case 1:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),(0,p.Z)(this,"lazyMint",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,x.a)(a.lazyMintable,v.d8).lazyMint.prepare(r,e));case 1:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,p.Z)(this,"claim",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e,n){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a.claimTo,t.next=3,a.contractWrapper.getSignerAddress();case 3:return t.t1=t.sent,t.t2=r,t.t3=e,t.t4=n,t.abrupt("return",t.t0.prepare.call(t.t0,t.t1,t.t2,t.t3,t.t4));case 8:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),(0,p.Z)(this,"claimTo",(0,Z.c)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e,n,c){var s,o;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=a.claimWithConditions,o=a.claimCustom,!s){t.next=4;break}return t.abrupt("return",s.to.prepare(r,e,n,c));case 4:if(!o){t.next=6;break}return t.abrupt("return",o.to.prepare(r,e,n,c));case 6:throw new v.x(v.dc);case 7:case"end":return t.stop()}}),t)})));return function(r,e,n,a){return t.apply(this,arguments)}}())),this.contractWrapper=r,this.storage=e,this.query=this.detectErc1155Enumerable(),this.mintable=this.detectErc1155Mintable(),this.burnable=this.detectErc1155Burnable(),this.lazyMintable=this.detectErc1155LazyMintable(),this.signatureMintable=this.detectErc1155SignatureMintable(),this.claimCustom=this.detectErc1155Claimable(),this.claimWithConditions=this.detectErc1155ClaimableWithConditions(),this._chainId=n}return(0,u.Z)(t,[{key:"chainId",get:function(){return this._chainId}},{key:"onNetworkUpdated",value:function(t){this.contractWrapper.updateSignerOrProvider(t)}},{key:"getAddress",value:function(){return this.contractWrapper.address}},{key:"get",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){var e,n,s,o;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.contractWrapper.read("totalSupply",[r]).catch((function(){return f.O$.from(0)})),this.getTokenMetadata(r).catch((function(){return(0,c.Z)({id:r.toString(),uri:""},g.F)}))]);case 2:return e=t.sent,n=(0,a.Z)(e,2),s=n[0],o=n[1],t.abrupt("return",{owner:l.d,metadata:o,type:"ERC1155",supply:s.toString()});case 7:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"totalSupply",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,b.d)(this.contractWrapper,"ERC1155Supply")){t.next=6;break}return t.next=3,this.contractWrapper.read("totalSupply",[r]);case 3:return t.abrupt("return",t.sent);case 6:throw new v.x(v.dg);case 7:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"balanceOf",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.contractWrapper,t.next=3,(0,v.aM)(r);case 3:return t.t1=t.sent,t.t2=e,t.t3=[t.t1,t.t2],t.next=8,t.t0.read.call(t.t0,"balanceOf",t.t3);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"balance",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.contractWrapper.getSignerAddress();case 3:return t.t1=t.sent,t.t2=r,t.next=7,t.t0.balanceOf.call(t.t0,t.t1,t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"isApproved",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.contractWrapper,t.next=3,(0,v.aM)(r);case 3:return t.t1=t.sent,t.next=6,(0,v.aM)(e);case 6:return t.t2=t.sent,t.t3=[t.t1,t.t2],t.next=10,t.t0.read.call(t.t0,"isApprovedForAll",t.t3);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"nextTokenIdToMint",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,b.h)("nextTokenIdToMint",this.contractWrapper)){t.next=6;break}return t.next=3,this.contractWrapper.read("nextTokenIdToMint",[]);case 3:return t.abrupt("return",t.sent);case 6:throw new Error("Contract requires the `nextTokenIdToMint` function available to determine the next token ID to mint");case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getAll",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,x.a)(this.query,v.d7).all(r));case 1:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"totalCount",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,x.a)(this.query,v.d7).totalCount());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"totalCirculatingSupply",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,x.a)(this.query,v.d7).totalCirculatingSupply(r));case 1:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"getOwned",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=4;break}return t.next=3,(0,v.aM)(r);case 3:r=t.sent;case 4:return t.abrupt("return",(0,x.a)(this.query,v.d7).owned(r,e));case 5:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"getMintTransaction",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,x.a)(this.mintable,v.db).getMintTransaction(r,e));case 1:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"getClaimTransaction",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r,e,n,a){var c,s;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=this.claimWithConditions,s=this.claimCustom,!c){t.next=4;break}return t.abrupt("return",c.conditions.getClaimTransaction(r,e,n,a));case 4:if(!s){t.next=6;break}return t.abrupt("return",s.getClaimTransaction(r,e,n,a));case 6:throw new v.x(v.dc);case 7:case"end":return t.stop()}}),t,this)})));return function(r,e,n,a){return t.apply(this,arguments)}}()},{key:"claimConditions",get:function(){return(0,x.a)(this.claimWithConditions,v.dd).conditions}},{key:"signature",get:function(){return(0,x.a)(this.signatureMintable,v.de)}},{key:"revealer",get:function(){var t;return(0,x.a)(null===(t=this.lazyMintable)||void 0===t?void 0:t.revealer,v.d9)}},{key:"getTokenMetadata",value:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(r){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.read("uri",[r]);case 2:if(e=t.sent){t.next=5;break}throw new v.n;case 5:return t.abrupt("return",(0,g.f)(r,e,this.storage));case 6:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"detectErc1155Enumerable",value:function(){if((0,b.d)(this.contractWrapper,"ERC1155Enumerable"))return new N(this,this.contractWrapper)}},{key:"detectErc1155Mintable",value:function(){if((0,b.d)(this.contractWrapper,"ERC1155Mintable"))return new R(this,this.contractWrapper,this.storage)}},{key:"detectErc1155Burnable",value:function(){if((0,b.d)(this.contractWrapper,"ERC1155Burnable"))return new I(this.contractWrapper)}},{key:"detectErc1155LazyMintable",value:function(){if((0,b.d)(this.contractWrapper,"ERC1155LazyMintableV1")||(0,b.d)(this.contractWrapper,"ERC1155LazyMintableV2"))return new D(this,this.contractWrapper,this.storage)}},{key:"detectErc1155SignatureMintable",value:function(){if((0,b.d)(this.contractWrapper,"ERC1155SignatureMintable"))return new z(this.contractWrapper,this.storage)}},{key:"detectErc1155Claimable",value:function(){if((0,b.d)(this.contractWrapper,"ERC1155ClaimCustom"))return new O(this.contractWrapper)}},{key:"detectErc1155ClaimableWithConditions",value:function(){if((0,b.d)(this.contractWrapper,"ERC1155ClaimConditionsV1")||(0,b.d)(this.contractWrapper,"ERC1155ClaimConditionsV2")||(0,b.d)(this.contractWrapper,"ERC1155ClaimPhasesV1")||(0,b.d)(this.contractWrapper,"ERC1155ClaimPhasesV2"))return new F(this.contractWrapper,this.storage)}}]),t}()}}]);