"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[4684],{91305:function(e,t,r){r.d(t,{C:function(){return p}});var n=r(74165),a=r(15861),s=r(15671),i=r(43144),c=r(4942),o=r(35867),u=r(43414),p=function(){function e(t){var r=this;(0,s.Z)(this,e),(0,c.Z)(this,"featureName",u.d3.name),(0,c.Z)(this,"setRecipient",(0,o.c)(function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.T.fromContractWrapper({contractWrapper:r.contractWrapper,method:"setPrimarySaleRecipient",args:[t]}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),this.contractWrapper=t}return(0,i.Z)(e,[{key:"getRecipient",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contractWrapper.read("primarySaleRecipient",[]);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()},34684:function(e,t,r){r.r(t),r.d(t,{SmartContract:function(){return G}});var n=r(37762),a=r(74165),s=r(15861),i=r(15671),c=r(43144),o=r(4942),u=r(16433),p=r(53792),d=r(43414),f=r(93433),h=r(35867),m=r(19560),l=r(28552),v=r(18383),g=r(91953),x=r(17389),Z=r(43378),y=r(99094);function k(e,t){var r,a=d.bj.parse(e||[]).filter((function(e){return"event"===e.type})),s=[],i=(0,n.Z)(a);try{for(i.s();!(r=i.n()).done;){var c=r.value,o=(0,d.a1)(c.name,t,"events");s.push({inputs:c.inputs||[],outputs:c.outputs||[],name:c.name||"unknown",comment:o})}}catch(u){i.e(u)}finally{i.f()}return s}var w=function(){function e(t,r){(0,i.Z)(this,e),this.contractWrapper=t,this.storage=r}return(0,c.Z)(e,[{key:"get",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._cachedMetadata){e.next=2;break}return e.abrupt("return",this._cachedMetadata);case 2:return e.next=4,(0,d.J)(this.contractWrapper.address,this.contractWrapper.getProvider(),this.storage,this.contractWrapper.options);case 4:return this._cachedMetadata=e.sent,e.abrupt("return",this._cachedMetadata);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"extractSources",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get();case 2:return t=e.sent,e.abrupt("return",(0,d.ap)(t,this.storage));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"extractFunctions",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.get();case 3:r=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:return e.abrupt("return",(0,d.a3)(d.bj.parse(this.contractWrapper.abi),null===(t=r)||void 0===t?void 0:t.metadata));case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"extractEvents",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.get();case 3:r=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:return e.abrupt("return",k(d.bj.parse(this.contractWrapper.abi),null===(t=r)||void 0===t?void 0:t.metadata));case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),b=function(e){return e[e.None=0]="None",e[e.AddAdmin=1]="AddAdmin",e[e.RemoveAdmin=2]="RemoveAdmin",e}({}),A={startDate:m.O$.from(0),expirationDate:m.O$.from(0),approvedCallTargets:[],nativeTokenLimitPerTransaction:"0"},W=function(){return y.z.object({startDate:u.S,expirationDate:u.E,nativeTokenLimitPerTransaction:d.cw.default(0),approvedCallTargets:y.z.union([y.z.array(d.b9),y.z.literal("*")])})}(),P=function(){return y.z.array(y.z.object({signer:d.b9,makeAdmin:y.z.boolean(),permissions:W}))}(),T=[{name:"signer",type:"address"},{name:"approvedTargets",type:"address[]"},{name:"nativeTokenLimitPerTransaction",type:"uint256"},{name:"permissionStartTimestamp",type:"uint128"},{name:"permissionEndTimestamp",type:"uint128"},{name:"reqValidityStartTimestamp",type:"uint128"},{name:"reqValidityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}],S=[{name:"signer",type:"address"},{name:"isAdmin",type:"uint8"},{name:"approvedTargets",type:"address[]"},{name:"nativeTokenLimitPerTransaction",type:"uint256"},{name:"permissionStartTimestamp",type:"uint128"},{name:"permissionEndTimestamp",type:"uint128"},{name:"reqValidityStartTimestamp",type:"uint128"},{name:"reqValidityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}],E=function(){function e(t){var r=this;(0,i.Z)(this,e),(0,o.Z)(this,"featureName",d.dl.name),(0,o.Z)(this,"grantAdminPermissions",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.aM)(t);case 2:return n=e.sent,e.next=5,r.sendSignerPermissionRequest(n,A,b.AddAdmin);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),(0,o.Z)(this,"revokeAdminPermissions",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.aM)(t);case 2:return n=e.sent,e.next=5,r.sendSignerPermissionRequest(n,A,b.RemoveAdmin);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),(0,o.Z)(this,"grantPermissions",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var s,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.aM)(t);case 2:return s=e.sent,e.next=5,W.parseAsync(n);case 5:return i=e.sent,e.next=8,r.isAdmin(s);case 8:if(!e.sent){e.next=10;break}throw new Error("Signer is already an admin. Cannot grant permissions to an existing admin.");case 10:return e.next=12,r.isSigner(s);case 12:if(!e.sent){e.next=14;break}throw new Error("Signer already has permissions. Cannot grant permissions to an existing signer. You can update permissions using `updatePermissions`.");case 14:return e.next=16,r.sendSignerPermissionRequest(s,i,b.None);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())),(0,o.Z)(this,"updatePermissions",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var s,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.aM)(t);case 2:return s=e.sent,e.next=5,W.parseAsync(n);case 5:return i=e.sent,e.next=8,r.isAdmin(s);case 8:if(!e.sent){e.next=10;break}throw new Error("Signer is already an admin. Cannot update permissions of an existing admin.");case 10:return e.next=12,r.isSigner(s);case 12:if(e.sent){e.next=14;break}throw new Error("Signer does not already have permissions. You can grant permissions using `grantPermissions`.");case 14:return e.next=16,r.sendSignerPermissionRequest(s,i,b.None);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())),(0,o.Z)(this,"revokeAccess",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.aM)(t);case 2:return n=e.sent,e.next=5,r.isAdmin(n);case 5:if(!e.sent){e.next=7;break}throw new Error("Signer is already an admin. Cannot revoke permissions of an admin.");case 7:return e.next=9,r.isSigner(n);case 9:if(e.sent){e.next=11;break}throw new Error("Signer does not already have permissions. You can grant permissions using `grantPermissions`.");case 11:return e.next=13,r.sendSignerPermissionRequest(n,{startDate:m.O$.from(0),expirationDate:m.O$.from(0),approvedCallTargets:[],nativeTokenLimitPerTransaction:"0"},b.None);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),(0,o.Z)(this,"approveTargetForSigner",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var s,i,c,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.aM)(t);case 2:return s=e.sent,e.next=5,(0,d.aM)(n);case 5:return i=e.sent,e.next=8,r.isAdmin(s);case 8:if(!e.sent){e.next=10;break}throw new Error("Signer is already an admin. Cannot approve targets for an admin.");case 10:return e.next=12,r.isSigner(s);case 12:if(e.sent){e.next=14;break}throw new Error("Signer does not already have permissions. You can grant permissions using `grantPermissions`.");case 14:return e.next=16,r.contractWrapper.read("getPermissionsForSigner",[s]);case 16:if(!(c=e.sent).approvedTargets.includes(n)){e.next=19;break}throw new Error("Target is already approved");case 19:return o=[].concat((0,f.Z)(c.approvedTargets),[i]),e.next=22,r.sendSignerPermissionRequest(s,{startDate:m.O$.from(c.startTimestamp),expirationDate:m.O$.from(c.endTimestamp),approvedCallTargets:o,nativeTokenLimitPerTransaction:c.nativeTokenLimitPerTransaction.toString()},b.None);case 22:return e.abrupt("return",e.sent);case 23:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())),(0,o.Z)(this,"disapproveTargetForSigner",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var s,i,c,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.aM)(t);case 2:return s=e.sent,e.next=5,(0,d.aM)(n);case 5:return i=e.sent,e.next=8,r.isAdmin(s);case 8:if(!e.sent){e.next=10;break}throw new Error("Signer is already an admin. Cannot approve targets for an admin.");case 10:return e.next=12,r.isSigner(s);case 12:if(e.sent){e.next=14;break}throw new Error("Signer does not already have permissions. You can grant permissions using `grantPermissions`.");case 14:return e.next=16,r.contractWrapper.read("getPermissionsForSigner",[s]);case 16:if((c=e.sent).approvedTargets.includes(i)){e.next=19;break}throw new Error("Target is currently not approved");case 19:return o=c.approvedTargets.filter((function(e){return l.getAddress(e)!==l.getAddress(i)})),e.next=22,r.sendSignerPermissionRequest(s,{startDate:m.O$.from(c.startTimestamp),expirationDate:m.O$.from(c.endTimestamp),approvedCallTargets:o,nativeTokenLimitPerTransaction:c.nativeTokenLimitPerTransaction.toString()},b.None);case 22:return e.abrupt("return",e.sent);case 23:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())),(0,o.Z)(this,"resetAllPermissions",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var i,c,o,u,p,d,f,m,l,v,g,x,Z;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.parseAsync(t);case 2:if(i=e.sent,!r.hasDuplicateSigners(i)){e.next=5;break}throw new Error("Duplicate signers found in input.");case 5:return c=[],o=[],u=[],e.next=10,r.getAllAdmins();case 10:return p=e.sent,d=i.filter((function(e){return e.makeAdmin})).map((function(e){return e.signer})),p.forEach(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d.includes(t)){e.next=5;break}return e.next=3,r.sendSignerPermissionRequest(t,A,b.RemoveAdmin);case 3:n=e.sent.encode(),c.push(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=15,r.getAllSigners();case 15:return f=e.sent,m=i.filter((function(e){return!e.makeAdmin})).map((function(e){return e.signer})),e.next=19,Promise.all(f.map(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.includes(t.signer)){e.next=5;break}return e.next=3,r.sendSignerPermissionRequest(t.signer,A,b.None);case 3:n=e.sent.encode(),u.push(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 19:l=(0,n.Z)(i),e.prev=20,l.s();case 22:if((v=l.n()).done){e.next=36;break}if(!(g=v.value).makeAdmin){e.next=30;break}return e.next=27,r.sendSignerPermissionRequest(g.signer,A,b.AddAdmin);case 27:e.sent.encode(),e.next=34;break;case 30:return e.next=32,r.sendSignerPermissionRequest(g.signer,g.permissions,b.None);case 32:x=e.sent.encode(),o.push(x);case 34:e.next=22;break;case 36:e.next=41;break;case 38:e.prev=38,e.t0=e.catch(20),l.e(e.t0);case 41:return e.prev=41,l.f(),e.finish(41);case 44:return Z=[],c.forEach((function(e){Z.push(e)})),u.forEach((function(e){Z.push(e)})),o.forEach((function(e){Z.push(e)})),e.abrupt("return",h.T.fromContractWrapper({contractWrapper:r.contractWrapper,method:"multicall",args:[Z]}));case 49:case"end":return e.stop()}}),e,null,[[20,38,41,44]])})));return function(t){return e.apply(this,arguments)}}())),this.contractWrapper=t}return(0,c.Z)(e,[{key:"getAddress",value:function(){return this.contractWrapper.address}},{key:"hasDuplicateSigners",value:function(e){var t,r={},a=e.map((function(e){return e.signer})),s=(0,n.Z)(a);try{for(s.s();!(t=s.n()).done;){var i=t.value;if(r[i])return!0;r[i]=!0}}catch(c){s.e(c)}finally{s.f()}return!1}},{key:"parseSignerPermissionsStruct",value:function(e){return{startDate:new Date(1e3*parseInt(e.startTimestamp.toString())),expirationDate:new Date(1e3*parseInt(e.endTimestamp.toString())),nativeTokenLimitPerTransaction:m.O$.from(e.nativeTokenLimitPerTransaction),approvedCallTargets:e.approvedTargets}}},{key:"sendSignerPermissionRequest",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,r,n){var s,i,c,o,u,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,p.d)(this.contractWrapper,"AccountPermissionsV1")){e.next=11;break}if(n!==b.AddAdmin&&n!==b.RemoveAdmin){e.next=5;break}return e.abrupt("return",h.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"setAdmin",args:[t,n===b.AddAdmin]}));case 5:return e.next=7,this.generateLegacyPayload(t,r);case 7:return s=e.sent,i=s.payload,c=s.signature,e.abrupt("return",h.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"setPermissionsForSigner",args:[i,c]}));case 11:return e.next=13,this.generatePayload(t,r,n);case 13:return o=e.sent,u=o.payload,d=o.signature,e.abrupt("return",h.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"setPermissionsForSigner",args:[u,d]}));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"generatePayload",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,r,n){var s,i,c,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={signer:t,isAdmin:n.valueOf(),approvedTargets:"*"===r.approvedCallTargets?[d.cu]:r.approvedCallTargets,nativeTokenLimitPerTransaction:v.parseEther(r.nativeTokenLimitPerTransaction),permissionStartTimestamp:r.startDate,permissionEndTimestamp:r.expirationDate,reqValidityStartTimestamp:0,reqValidityEndTimestamp:m.O$.from(Math.floor(new Date(Date.now()+31536e7).getTime()/1e3)),uid:(0,Z.I)(void 0)},e.next=3,this.contractWrapper.getChainID();case 3:return i=e.sent,c=this.contractWrapper.getSigner(),(0,x.Z)(c,"No signer available"),e.next=8,this.contractWrapper.signTypedData(c,{name:"Account",version:"1",chainId:i,verifyingContract:this.getAddress()},{SignerPermissionRequest:S},s);case 8:return o=e.sent,e.abrupt("return",{payload:s,signature:o});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"generateLegacyPayload",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,r){var n,s,i,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("*"!==r.approvedCallTargets){e.next=2;break}throw new Error("Wildcard call targets are not supported on legacy account permissions contract, please deploy an updated contract factory.");case 2:return n={signer:t,approvedTargets:r.approvedCallTargets,nativeTokenLimitPerTransaction:v.parseEther(r.nativeTokenLimitPerTransaction),permissionStartTimestamp:r.startDate,permissionEndTimestamp:r.expirationDate,reqValidityStartTimestamp:0,reqValidityEndTimestamp:m.O$.from(Math.floor(new Date(Date.now()+31536e7).getTime()/1e3)),uid:(0,Z.I)(void 0)},e.next=5,this.contractWrapper.getChainID();case 5:return s=e.sent,i=this.contractWrapper.getSigner(),(0,x.Z)(i,"No signer available"),e.next=10,this.contractWrapper.signTypedData(i,{name:"Account",version:"1",chainId:s,verifyingContract:this.getAddress()},{SignerPermissionRequest:T},n);case 10:return c=e.sent,e.abrupt("return",{payload:n,signature:c});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"isAdmin",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.aM)(t);case 2:return r=e.sent,e.next=5,this.contractWrapper.read("isAdmin",[r]);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isSigner",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.aM)(t);case 2:return r=e.sent,e.next=5,this.contractWrapper.read("isActiveSigner",[r]);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllAdmins",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contractWrapper.read("getAllAdmins",[]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllSigners",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,r=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contractWrapper.read("getAllActiveSigners",[]);case 2:return t=e.sent,e.next=5,Promise.all(t.map(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signer,s=r.parseSignerPermissionsStruct(t),e.abrupt("return",{signer:n,permissions:s});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllAdminsAndSigners",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllAdmins();case 2:return t=e.sent,r=t.map((function(e){return{isAdmin:!0,signer:e,permissions:{startDate:new Date(0),expirationDate:new Date(0),nativeTokenLimitPerTransaction:m.O$.from(0),approvedCallTargets:[]}}})),e.next=6,this.getAllSigners();case 6:return n=e.sent,e.abrupt("return",[].concat((0,f.Z)(r),(0,f.Z)(n)));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),C=function(){function e(t){var r=this;(0,i.Z)(this,e),(0,o.Z)(this,"featureName",d.dm.name),(0,o.Z)(this,"grantAdminPermissions",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.a)(r.accountPermissions,d.dl).grantAdminPermissions.prepare(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),(0,o.Z)(this,"revokeAdminPermissions",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.a)(r.accountPermissions,d.dl).revokeAdminPermissions.prepare(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),(0,o.Z)(this,"grantPermissions",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.a)(r.accountPermissions,d.dl).grantPermissions.prepare(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())),(0,o.Z)(this,"updatePermissions",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.a)(r.accountPermissions,d.dl).updatePermissions.prepare(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())),(0,o.Z)(this,"revokeAccess",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.a)(r.accountPermissions,d.dl).revokeAccess.prepare(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),(0,o.Z)(this,"approveTargetForSigner",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.a)(r.accountPermissions,d.dl).approveTargetForSigner.prepare(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())),(0,o.Z)(this,"disapproveTargetForSigner",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.a)(r.accountPermissions,d.dl).disapproveTargetForSigner.prepare(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())),(0,o.Z)(this,"resetAllPermissions",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.a)(r.accountPermissions,d.dl).resetAllPermissions.prepare(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),this.contractWrapper=t,this.accountPermissions=this.detectAccountPermissions()}return(0,c.Z)(e,[{key:"detectAccountPermissions",value:function(){if((0,p.d)(this.contractWrapper,"AccountPermissions")||(0,p.d)(this.contractWrapper,"AccountPermissionsV1"))return new E(this.contractWrapper)}},{key:"getAddress",value:function(){return this.contractWrapper.address}},{key:"isAdmin",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.a)(this.accountPermissions,d.dl).isAdmin(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isSigner",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.a)(this.accountPermissions,d.dl).isSigner(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllAdmins",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.a)(this.accountPermissions,d.dl).getAllAdmins());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllSigners",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.a)(this.accountPermissions,d.dl).getAllSigners());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllAdminsAndSigners",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.a)(this.accountPermissions,d.dl).getAllAdminsAndSigners());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),D=function(){function e(t){var r=this;(0,i.Z)(this,e),(0,o.Z)(this,"featureName",d.dn.name),(0,o.Z)(this,"createAccount",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.isAccountDeployed(t,n);case 2:if(!e.sent){e.next=4;break}throw new Error("Account already deployed for admin: ".concat(t));case 4:return s=g.Y0(""),n&&(s=n),e.abrupt("return",h.T.fromContractWrapper({contractWrapper:r.contractWrapper,method:"createAccount",args:[t,s],parse:function(e){return{address:r.contractWrapper.parseLogs("AccountCreated",null===e||void 0===e?void 0:e.logs)[0].args.account,receipt:e}}}));case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())),this.contractWrapper=t,this.events=new p.a(this.contractWrapper)}return(0,c.Z)(e,[{key:"getAddress",value:function(){return this.contractWrapper.address}},{key:"predictAccountAddress",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.Y0(""),r&&(n=r),e.abrupt("return",this.contractWrapper.read("getAddress",[t,n]));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAssociatedAccounts",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.contractWrapper.read("getAccountsOfSigner",[t]));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllAccounts",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contractWrapper.read("getAllAccounts",[]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isAccountDeployed",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.predictAccountAddress(t,r);case 2:return n=e.sent,e.abrupt("return",(0,d.aw)(n,this.contractWrapper.getProvider()));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),R=r(84546),F=r(91612),M=r(70640),N=r(69981),I=r(70304),L=r(91305),O=r(25923),q=r(78426),j=r(59331),$=r(53042),U=r(97932),V=r(93358),_=r(99456),z=(r(64166),r(79955),r(87962),r(60862),r(89806),function(){function e(t){var r=this;(0,i.Z)(this,e),(0,o.Z)(this,"featureName",d.dF.name),(0,o.Z)(this,"drop",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,s){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.T.fromContractWrapper({contractWrapper:r.contractWrapper,method:"airdropERC1155",args:[t,n,s],parse:function(e){var t=r.contractWrapper.parseLogs("AirdropFailed",e.logs).map((function(e){return{recipient:e.args.recipient,tokenId:e.args.tokenId.toNumber(),amount:e.args.amount.toString()}}));return{successfulDropCount:s.length-t.length,failedDropCount:t.length,failedDrops:t}}}));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}())),this.contractWrapper=t}return(0,c.Z)(e,[{key:"getAddress",value:function(){return this.contractWrapper.address}}]),e}()),J=function(){function e(t){var r=this;(0,i.Z)(this,e),(0,o.Z)(this,"featureName",d.dG.name),(0,o.Z)(this,"drop",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,s){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.T.fromContractWrapper({contractWrapper:r.contractWrapper,method:"airdropERC20",args:[t,n,s],parse:function(e){var t=r.contractWrapper.parseLogs("AirdropFailed",e.logs).map((function(e){return{recipient:e.args.recipient,amount:e.args.amount.toString()}}));return{successfulDropCount:s.length-t.length,failedDropCount:t.length,failedDrops:t}}}));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}())),this.contractWrapper=t}return(0,c.Z)(e,[{key:"getAddress",value:function(){return this.contractWrapper.address}}]),e}(),Y=function(){function e(t){var r=this;(0,i.Z)(this,e),(0,o.Z)(this,"featureName",d.dH.name),(0,o.Z)(this,"drop",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n,s){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.T.fromContractWrapper({contractWrapper:r.contractWrapper,method:"airdropERC721",args:[t,n,s],parse:function(e){var t=r.contractWrapper.parseLogs("AirdropFailed",e.logs).map((function(e){return{recipient:e.args.recipient,tokenId:e.args.tokenId.toNumber()}}));return{successfulDropCount:s.length-t.length,failedDropCount:t.length,failedDrops:t}}}));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}())),this.contractWrapper=t}return(0,c.Z)(e,[{key:"getAddress",value:function(){return this.contractWrapper.address}}]),e}(),B=function(){function e(t){var r=this;(0,i.Z)(this,e),(0,o.Z)(this,"featureName",d.dI.name),(0,o.Z)(this,"add",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.T.fromContractWrapper({contractWrapper:r.contractWrapper,method:"addExtension",args:[t.extension],parse:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var s,i,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.contractWrapper.parseLogs("ExtensionAdded",n.logs).length<1)){e.next=3;break}throw new Error("No ExtensionAdded event found");case 3:if(!t.extensionAbi){e.next=7;break}e.t0=d.bj.parse(t.extensionAbi),e.next=10;break;case 7:return e.next=9,(0,d.J)(t.extension.metadata.implementation,r.contractWrapper.getProvider(),r.contractWrapper.storage);case 9:e.t0=e.sent.abi;case 10:return s=e.t0,i=r.filterAbiForAdd(s,t.extension),c=(0,d.ak)([d.bj.parse(r.contractWrapper.abi),i]),r.contractWrapper.updateAbi(c),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),(0,o.Z)(this,"addDeployed",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,s,i,c,o,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.extensionAbi){e.next=6;break}return e.next=4,(0,d.J)(t.extensionAddress,r.contractWrapper.getProvider(),r.contractWrapper.storage,r.contractWrapper.options);case 4:s=e.sent,n=s.abi;case 6:if((0,x.Z)(n,"Require extension ABI"),i="",!t.extensionMetadata){e.next=19;break}if("string"!==typeof t.extensionMetadata){e.next=13;break}i=t.extensionMetadata,e.next=19;break;case 13:return e.next=15,d.bB.parseAsync(t.extensionMetadata);case 15:return c=e.sent,e.next=18,r.contractWrapper.storage.upload(c);case 18:i=e.sent;case 19:return o=(0,U.b)(d.bj.parse(n)),u={metadata:{name:t.extensionName,metadataURI:i,implementation:t.extensionAddress},functions:o},e.abrupt("return",r.add.prepare({extension:u,extensionAbi:n}));case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),(0,o.Z)(this,"addPublished",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,s,i,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.version||"latest",e.next=3,r.deployExtension(t.extensionName,t.publisherAddress||d.aI,n);case 3:return s=e.sent,i=s.deployedExtensionAddress,c=s.extensionMetadata,e.abrupt("return",r.addDeployed.prepare({extensionName:t.extensionName,extensionAddress:i,extensionMetadata:t.extensionMetadataOverride||c}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),(0,o.Z)(this,"replace",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.T.fromContractWrapper({contractWrapper:r.contractWrapper,method:"replaceExtension",args:[t.extension],parse:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var s,i,c,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.contractWrapper.parseLogs("ExtensionReplaced",n.logs).length<1)){e.next=3;break}throw new Error("No ExtensionReplaced event found");case 3:if(!t.extensionAbi){e.next=7;break}e.t0=d.bj.parse(t.extensionAbi),e.next=10;break;case 7:return e.next=9,(0,d.J)(t.extension.metadata.implementation,r.contractWrapper.getProvider(),r.contractWrapper.storage);case 9:e.t0=e.sent.abi;case 10:return s=e.t0,i=r.filterAbiForRemove(d.bj.parse(r.contractWrapper.abi),s),c=r.filterAbiForAdd(s,t.extension),o=(0,d.ak)([i,c]),r.contractWrapper.updateAbi(o),e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),(0,o.Z)(this,"replaceDeployed",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,s,i,c,o,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.extensionAbi){e.next=6;break}return e.next=4,(0,d.J)(t.extensionAddress,r.contractWrapper.getProvider(),r.contractWrapper.storage,r.contractWrapper.options);case 4:s=e.sent,n=s.abi;case 6:if((0,x.Z)(n,"Require extension ABI"),i="",!t.extensionMetadata){e.next=19;break}if("string"!==typeof t.extensionMetadata){e.next=13;break}i=t.extensionMetadata,e.next=19;break;case 13:return e.next=15,d.bB.parseAsync(t.extensionMetadata);case 15:return c=e.sent,e.next=18,r.contractWrapper.storage.upload(c);case 18:i=e.sent;case 19:return o=(0,U.b)(d.bj.parse(n)),u={metadata:{name:t.extensionName,metadataURI:i,implementation:t.extensionAddress},functions:o},e.abrupt("return",r.replace.prepare({extension:u,extensionAbi:n}));case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),(0,o.Z)(this,"replacePublished",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,s,i,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.version||"latest",e.next=3,r.deployExtension(t.extensionName,t.publisherAddress||d.aI,n);case 3:return s=e.sent,i=s.deployedExtensionAddress,c=s.extensionMetadata,e.abrupt("return",r.replaceDeployed.prepare({extensionName:t.extensionName,extensionAddress:i,extensionMetadata:t.extensionMetadataOverride||c}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),(0,o.Z)(this,"remove",(0,h.c)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getExtensionAddress(t.extensionName);case 2:return n=e.sent,e.abrupt("return",h.T.fromContractWrapper({contractWrapper:r.contractWrapper,method:"removeExtension",args:[t.extensionName],parse:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var s,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.contractWrapper.parseLogs("ExtensionRemoved",t.logs).length<1)){e.next=3;break}throw new Error("No ExtensionRemoved event found");case 3:return e.next=5,(0,d.J)(n,r.contractWrapper.getProvider(),r.contractWrapper.storage);case 5:return s=e.sent.abi,i=r.filterAbiForRemove(d.bj.parse(r.contractWrapper.abi),s),r.contractWrapper.updateAbi(i),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),this.contractWrapper=t}return(0,c.Z)(e,[{key:"getAddress",value:function(){return this.contractWrapper.readContract.address}},{key:"getAll",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contractWrapper.readContract.getAllExtensions();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contractWrapper.readContract.getExtension(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getExtensionAddress",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(t);case 2:return r=e.sent,e.abrupt("return",r.metadata.implementation);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllFunctions",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(t);case 2:return r=e.sent,e.abrupt("return",r.functions);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getExtensionForFunction",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=t.functionSelector)||((0,x.Z)(t.functionSignature,"Atleast one of function selector and signature must be provided"),r=V.id(t.functionSignature).substring(0,10)),e.next=4,this.contractWrapper.readContract.getMetadataForFunction(r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getExtensionAddressForFunction",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getExtensionForFunction(t);case 2:return r=e.sent,e.abrupt("return",r.implementation);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"filterAbiForAdd",value:function(e,t){var r=new _.vU(e),n=t.functions.map((function(e){return e.functionSelector}));return e.filter((function(e){var t=Object.values(new _.vU([e]).functions);if(0===t.length)return!1;var a=r.getSighash(t[0]);return n.includes(a)}))}},{key:"filterAbiForRemove",value:function(e,t){var r=new _.vU(e),n=new _.vU(t),a=Object.values(n.functions).map((function(e){return n.getSighash(e)}));return e.filter((function(e){var t=Object.values(new _.vU([e]).functions);if(0===t.length)return!1;var n=r.getSighash(t[0]);return!a.includes(n)}))}},{key:"deployExtension",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,r){var s,i,c,o,u,p,f,h,m,l,v,g,Z=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Z.length>2&&void 0!==Z[2]?Z[2]:"latest",e.next=3,(0,d.aJ)(r,t,i,this.contractWrapper.storage,this.contractWrapper.options.clientId,this.contractWrapper.options.secretKey);case 3:return c=e.sent,e.next=6,(0,U.g)(c.metadataUri,this.contractWrapper.storage,this.contractWrapper.getProvider(),"",this.contractWrapper.options.clientId,this.contractWrapper.options.secretKey);case 6:return o=e.sent,u=null===(s=o.find((function(e){return"implementation"===e.type})))||void 0===s?void 0:s.transaction.predictedAddress,p=o.filter((function(e){return e.transaction.data&&e.transaction.data.length>0})),f=p.filter((function(e){return"infra"!==e.type})).map((function(e){return e.transaction})),h=p.filter((function(e){return"infra"===e.type})).map((function(e){return e.transaction})),m=this.contractWrapper.getSigner(),(0,x.Z)(m,"Signer is required"),e.next=15,(0,U.a)(m,h,{});case 15:l=(0,n.Z)(f),e.prev=16,l.s();case 18:if((v=l.n()).done){e.next=30;break}return g=v.value,e.prev=20,e.next=23,(0,U.d)(m,g);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(20),console.debug("Error deploying contract at ".concat(g.predictedAddress),null===e.t0||void 0===e.t0?void 0:e.t0.message);case 28:e.next=18;break;case 30:e.next=35;break;case 32:e.prev=32,e.t1=e.catch(16),l.e(e.t1);case 35:return e.prev=35,l.f(),e.finish(35);case 38:return e.abrupt("return",{deployedExtensionAddress:u,extensionMetadata:c.metadataUri});case 39:case"end":return e.stop()}}),e,this,[[16,32,35,38],[20,25]])})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),G=function(){function e(t,r,n,a){(0,i.Z)(this,e);var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new d.cr(t,r,n,s,a);this._chainId=c,this.storage=a,this.contractWrapper=o,this.events=new p.a(this.contractWrapper),this.encoder=new R.C(this.contractWrapper),this.interceptor=new F.C(this.contractWrapper),this.estimator=new p.G(this.contractWrapper),this.publishedMetadata=new w(this.contractWrapper,this.storage),this.metadata=new p.C(this.contractWrapper,d.bg,this.storage)}return(0,c.Z)(e,[{key:"abi",get:function(){return d.bj.parse(this.contractWrapper.abi||[])}},{key:"royalties",get:function(){return(0,u.a)(this.detectRoyalties(),d.d1)}},{key:"roles",get:function(){return(0,u.a)(this.detectRoles(),d.d0)}},{key:"sales",get:function(){return(0,u.a)(this.detectPrimarySales(),d.d3)}},{key:"platformFees",get:function(){return(0,u.a)(this.detectPlatformFees(),d.dk)}},{key:"owner",get:function(){return(0,u.a)(this.detectOwnable(),d.d2)}},{key:"erc20",get:function(){return(0,u.a)(this.detectErc20(),d.cI)}},{key:"erc721",get:function(){return(0,u.a)(this.detectErc721(),d.cZ)}},{key:"erc1155",get:function(){return(0,u.a)(this.detectErc1155(),d.df)}},{key:"app",get:function(){return(0,u.a)(this.detectApp(),d.c$)}},{key:"directListings",get:function(){return(0,u.a)(this.detectDirectListings(),d.dh)}},{key:"englishAuctions",get:function(){return(0,u.a)(this.detectEnglishAuctions(),d.di)}},{key:"offers",get:function(){return(0,u.a)(this.detectOffers(),d.dj)}},{key:"airdrop20",get:function(){return(0,u.a)(this.detectAirdrop20(),d.dG)}},{key:"airdrop721",get:function(){return(0,u.a)(this.detectAirdrop721(),d.dH)}},{key:"airdrop1155",get:function(){return(0,u.a)(this.detectAirdrop1155(),d.dF)}},{key:"accountFactory",get:function(){return(0,u.a)(this.detectAccountFactory(),d.dn)}},{key:"account",get:function(){return(0,u.a)(this.detectAccount(),d.dm)}},{key:"extensions",get:function(){return(0,u.a)(this.detectBaseRouter(),d.dI)}},{key:"chainId",get:function(){return this._chainId}},{key:"onNetworkUpdated",value:function(e){this.contractWrapper.updateSignerOrProvider(e)}},{key:"getAddress",value:function(){return this.contractWrapper.address}},{key:"prepare",value:function(e,t,r){return h.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:e,args:t,overrides:r})}},{key:"call",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,r,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.contractWrapper.call(t,r,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"detectRoyalties",value:function(){if((0,p.d)(this.contractWrapper,"Royalty")){var e=new p.C(this.contractWrapper,d.bg,this.storage);return new M.C(this.contractWrapper,e)}}},{key:"detectRoles",value:function(){if((0,p.d)(this.contractWrapper,"Permissions"))return new I.C(this.contractWrapper,d.G)}},{key:"detectPrimarySales",value:function(){if((0,p.d)(this.contractWrapper,"PrimarySale"))return new L.C(this.contractWrapper)}},{key:"detectPlatformFees",value:function(){if((0,p.d)(this.contractWrapper,"PlatformFee"))return new N.C(this.contractWrapper)}},{key:"detectErc20",value:function(){if((0,p.d)(this.contractWrapper,"ERC20"))return new q.f(this.contractWrapper,this.storage,this.chainId)}},{key:"detectErc721",value:function(){if((0,p.d)(this.contractWrapper,"ERC721"))return new j.h(this.contractWrapper,this.storage,this.chainId)}},{key:"detectErc1155",value:function(){if((0,p.d)(this.contractWrapper,"ERC1155"))return new O.e(this.contractWrapper,this.storage,this.chainId)}},{key:"detectOwnable",value:function(){if((0,p.d)(this.contractWrapper,"Ownable"))return new M.a(this.contractWrapper)}},{key:"detectApp",value:function(){var e=new p.C(this.contractWrapper,d.bg,this.storage);return(0,p.d)(this.contractWrapper,"AppURI")||(0,p.d)(this.contractWrapper,"ContractMetadata")?new p.b(this.contractWrapper,e,this.storage):void 0}},{key:"detectDirectListings",value:function(){if((0,p.d)(this.contractWrapper,"DirectListings"))return new $.M(this.contractWrapper,this.storage)}},{key:"detectEnglishAuctions",value:function(){if((0,p.d)(this.contractWrapper,"EnglishAuctions"))return new $.a(this.contractWrapper,this.storage)}},{key:"detectOffers",value:function(){if((0,p.d)(this.contractWrapper,"Offers"))return new $.b(this.contractWrapper,this.storage)}},{key:"detectBaseRouter",value:function(){if((0,p.d)(this.contractWrapper,d.dI.name))return new B(this.contractWrapper)}},{key:"detectAirdrop20",value:function(){if((0,p.d)(this.contractWrapper,"AirdropERC20"))return new J(this.contractWrapper)}},{key:"detectAirdrop721",value:function(){if((0,p.d)(this.contractWrapper,"AirdropERC721"))return new Y(this.contractWrapper)}},{key:"detectAirdrop1155",value:function(){if((0,p.d)(this.contractWrapper,"AirdropERC1155"))return new z(this.contractWrapper)}},{key:"detectAccountFactory",value:function(){if((0,p.d)(this.contractWrapper,d.dn.name))return new D(this.contractWrapper)}},{key:"detectAccount",value:function(){if((0,p.d)(this.contractWrapper,d.dm.name))return new C(this.contractWrapper)}}]),e}()}}]);