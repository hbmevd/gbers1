"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[9331],{59331:function(t,r,e){e.d(r,{h:function(){return X},i:function(){return J}});var n=e(1413),a=e(93433),c=e(74165),i=e(29439),s=e(15861),u=e(43144),o=e(15671),p=e(4942),h=e(91953),f=e(19560),d=e(81895),l=e(46684),v=e(86388),m=e(18383),Z=e(48103),y=e(43414),g=e(16433),k=e(53792),w=e(35867),x=e(27611),W=e(70640),b=e(84546),T=e(26646),C=e(56571),M=e(17389),S=e(88034),E=e(99094),I=e(43378),P=(0,u.Z)((function t(r,e,n){var a=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",y.cJ.name),(0,p.Z)(this,"to",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){var n,s,u,o,p,h;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,Z.u)(e,a.storage),(0,y.aM)(r)]);case 2:return n=t.sent,s=(0,i.Z)(n,2),u=s[0],o=s[1],p=new b.C(a.contractWrapper),h=u.map((function(t){return p.encode("mintTo",[o,t])})),t.abrupt("return",w.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"multicall",args:[h],parse:function(t){var r=a.contractWrapper.parseLogs("TokensMinted",t.logs);if(0===r.length||r.length<e.length)throw new Error("TokenMinted event not found, minting failed");return r.map((function(r){var e=r.args.tokenIdMinted;return{id:e,receipt:t,data:function(){return a.erc721.get(e)}}}))}}));case 9:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),this.erc721=r,this.contractWrapper=e,this.storage=n})),R=(0,u.Z)((function t(r,e,n){var a=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",y.cK.name),(0,p.Z)(this,"to",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e,n){var i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.conditions.getClaimTransaction(r,e,n);case 2:return(i=t.sent).setParse((function(t){for(var r=a.contractWrapper.parseLogs("TokensClaimed",null===t||void 0===t?void 0:t.logs)[0].args.startTokenId,n=r.add(e),c=[],i=function(r){c.push({id:r,receipt:t,data:function(){return a.erc721.get(r)}})},s=r;s.lt(n);s=s.add(1))i(s);return c})),t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),this.erc721=r,this.contractWrapper=e,this.storage=n;var i=new k.C(this.contractWrapper,y.bg,this.storage);this.conditions=new x.D(this.contractWrapper,i,this.storage)})),N=function(){function t(r,e){var n=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",y.cL.name),(0,p.Z)(this,"to",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e,a){var i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getClaimTransaction(r,e,a);case 2:return(i=t.sent).setParse((function(t){for(var r=n.contractWrapper.parseLogs("TokensClaimed",null===t||void 0===t?void 0:t.logs)[0].args.startTokenId,a=r.add(e),c=[],i=function(r){c.push({id:r,receipt:t,data:function(){return n.erc721.get(r)}})},s=r;s.lt(a);s=s.add(1))i(s);return c})),t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),this.erc721=r,this.contractWrapper=e}return(0,u.Z)(t,[{key:"getClaimTransaction",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e,n){var a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={},!n||!n.pricePerToken){t.next=5;break}return t.next=4,(0,W.c)(this.contractWrapper,n.pricePerToken,e,n.currencyAddress,n.checkERC20Allowance);case 4:a=t.sent;case 5:return t.abrupt("return",w.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"claim",args:[r,e],overrides:a}));case 6:case"end":return t.stop()}}),t,this)})));return function(r,e,n){return t.apply(this,arguments)}}()}]),t}(),A=function(){function t(r,e,n){var a=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",y.cM.name),(0,p.Z)(this,"lazyMint",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){var n,i,s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.erc721.nextTokenIdToMint();case 2:return n=t.sent,t.next=5,(0,Z.u)(r,a.storage,n.toNumber(),e);case 5:return i=t.sent,s=(0,Z.g)(i),t.abrupt("return",w.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"lazyMint",args:[i.length,s.endsWith("/")?s:"".concat(s,"/"),h.Y0("")],parse:function(t){for(var r=a.contractWrapper.parseLogs("TokensLazyMinted",null===t||void 0===t?void 0:t.logs),e=r[0].args.startTokenId,n=r[0].args.endTokenId,c=[],i=function(r){c.push({id:r,receipt:t,data:function(){return a.erc721.getTokenMetadata(r)}})},s=e;s.lte(n);s=s.add(1))i(s);return c}}));case 8:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),this.erc721=r,this.contractWrapper=e,this.storage=n,this.revealer=this.detectErc721Revealable()}return(0,u.Z)(t,[{key:"detectErc721Revealable",value:function(){var t=this;if((0,k.d)(this.contractWrapper,"ERC721Revealable"))return new W.D(this.contractWrapper,this.storage,y.cN.name,(function(){return t.erc721.nextTokenIdToMint()}))}}]),t}(),L=function(){function t(r,e,n){var a=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",y.cO.name),(0,p.Z)(this,"to",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){var n,s,u,o;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,Z.b)(e,a.storage),(0,y.aM)(r)]);case 2:return n=t.sent,s=(0,i.Z)(n,2),u=s[0],o=s[1],t.abrupt("return",w.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"mintTo",args:[o,u],parse:function(t){var r=a.contractWrapper.parseLogs("Transfer",null===t||void 0===t?void 0:t.logs);if(0===r.length)throw new Error("TransferEvent event not found");var e=r[0].args.tokenId;return{id:e,receipt:t,data:function(){return a.erc721.get(e)}}}}));case 7:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),this.erc721=r,this.contractWrapper=e,this.storage=n,this.batch=this.detectErc721BatchMintable()}return(0,u.Z)(t,[{key:"getMintTransaction",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.to,t.next=3,(0,y.aM)(r);case 3:return t.t1=t.sent,t.t2=e,t.abrupt("return",t.t0.prepare.call(t.t0,t.t1,t.t2));case 6:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"detectErc721BatchMintable",value:function(){if((0,k.d)(this.contractWrapper,"ERC721BatchMintable"))return new P(this.erc721,this.contractWrapper,this.storage)}}]),t}(),O=function(){function t(r,e){(0,o.Z)(this,t),(0,p.Z)(this,"featureName",y.cP.name),this.erc721=r,this.contractWrapper=e}return(0,u.Z)(t,[{key:"all",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){var n,a,i,s=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenIds(r);case 2:return n=t.sent,e&&(a=(null===e||void 0===e?void 0:e.start)||0,i=(null===e||void 0===e?void 0:e.count)||Z.D,n=n.slice(a,a+i)),t.next=6,Promise.all(n.map((function(t){return s.erc721.get(t.toString())})));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"tokenIds",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e,n,a,i=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=y.aM,t.t1=r,t.t1){t.next=6;break}return t.next=5,this.contractWrapper.getSignerAddress();case 5:t.t1=t.sent;case 6:return t.t2=t.t1,t.next=9,(0,t.t0)(t.t2);case 9:return e=t.sent,t.next=12,this.contractWrapper.read("balanceOf",[e]);case 12:return n=t.sent,a=Array.from(Array(n.toNumber()).keys()),t.next=16,Promise.all(a.map((function(t){return i.contractWrapper.read("tokenOfOwnerByIndex",[e,t])})));case 16:return t.abrupt("return",t.sent);case 17:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()}]),t}(),B=function(){function t(r,e){(0,o.Z)(this,t),(0,p.Z)(this,"featureName",y.cQ.name),this.erc721=r,this.contractWrapper=e}return(0,u.Z)(t,[{key:"all",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){var n,a,i,s=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenIds(r);case 2:return n=t.sent,e&&(a=(null===e||void 0===e?void 0:e.start)||0,i=(null===e||void 0===e?void 0:e.count)||Z.D,n=n.slice(a,a+i)),t.next=6,Promise.all(n.map((function(t){return s.erc721.get(t.toString())})));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"tokenIds",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=y.aM,t.t1=r,t.t1){t.next=6;break}return t.next=5,this.contractWrapper.getSignerAddress();case 5:t.t1=t.sent;case 6:return t.t2=t.t1,t.next=9,(0,t.t0)(t.t2);case 9:return e=t.sent,t.next=12,this.contractWrapper.read("tokensOfOwner",[e]);case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()}]),t}(),D=function(){function t(r,e){(0,o.Z)(this,t),(0,p.Z)(this,"featureName",y.cR.name),this.erc721=r,this.contractWrapper=e,this.owned=this.detectErc721Owned()}return(0,u.Z)(t,[{key:"all",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e,n,i,s,u,o=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=f.O$.from(0),!(0,k.h)("startTokenId",this.contractWrapper)){t.next=5;break}return t.next=4,this.contractWrapper.read("startTokenId",[]);case 4:e=t.sent;case 5:return n=f.O$.from((null===r||void 0===r?void 0:r.start)||0).add(e).toNumber(),i=f.O$.from((null===r||void 0===r?void 0:r.count)||Z.D).toNumber(),t.next=9,this.erc721.nextTokenIdToMint();case 9:return s=t.sent,u=Math.min(s.add(e).toNumber(),n+i),t.next=13,Promise.all((0,a.Z)(Array(u-n).keys()).map((function(t){return o.erc721.get((n+t).toString())})));case 13:return t.abrupt("return",t.sent);case 14:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"allOwners",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(){var r,e,n,i,s=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=f.O$.from(0),!(0,k.h)("startTokenId",this.contractWrapper)){t.next=5;break}return t.next=4,this.contractWrapper.read("startTokenId",[]);case 4:e=t.sent;case 5:return t.prev=5,t.next=8,this.erc721.totalClaimedSupply();case 8:r=t.sent,t.next=16;break;case 11:return t.prev=11,t.t0=t.catch(5),t.next=15,this.totalCount();case 15:r=t.sent;case 16:return r=r.add(e),n=(0,a.Z)(new Array(r.toNumber()).keys()),t.next=20,Promise.all(n.map((function(t){return s.erc721.ownerOf(t).catch((function(){return d.d}))})));case 20:return i=t.sent,t.abrupt("return",n.map((function(t){return{tokenId:t,owner:i[t]}})).filter((function(t){return t.owner!==d.d})));case 22:case"end":return t.stop()}}),t,this,[[5,11]])})));return function(){return t.apply(this,arguments)}}()},{key:"totalCount",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.erc721.nextTokenIdToMint();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"totalCirculatingSupply",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.read("totalSupply",[]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"detectErc721Owned",value:function(){return(0,k.d)(this.contractWrapper,"ERC721Enumerable")?new O(this.erc721,this.contractWrapper):(0,k.d)(this.contractWrapper,"ERC721AQueryable")?new B(this.erc721,this.contractWrapper):void 0}}]),t}(),q=function(){return I.B.extend({tierPriority:E.z.array(E.z.string()),royaltyRecipient:y.b9.default(d.d),royaltyBps:y.cC.default(0),quantity:y.b5.default(1)})}(),z=[{name:"validityStartTimestamp",type:"uint128"},{name:"validityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"},{name:"data",type:"bytes"}],F=function(){function t(r,e,n){var a=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",y.cS.name),(0,p.Z)(this,"createBatchWithTier",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e,n){var i,s,u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.erc721.nextTokenIdToMint();case 2:return i=t.sent,t.next=5,(0,Z.u)(r,a.storage,i.toNumber(),n);case 5:return s=t.sent,u=(0,Z.g)(s),t.abrupt("return",w.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"lazyMint",args:[s.length,u.endsWith("/")?u:"".concat(u,"/"),e,h.Y0("")],parse:function(t){for(var r=a.contractWrapper.parseLogs("TokensLazyMinted",null===t||void 0===t?void 0:t.logs),e=r[0].args[1],n=r[0].args[2],c=[],i=function(r){c.push({id:r,receipt:t,data:function(){return a.erc721.getTokenMetadata(r)}})},s=e;s.lte(n);s=s.add(1))i(s);return c}}));case 8:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),(0,p.Z)(this,"createDelayedRevealBatchWithTier",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e,n,i,s){var u,o,p,f,d,m,y,g,k,x,W;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}throw new Error("Password is required");case 2:return t.next=4,a.storage.uploadBatch([C.a.parse(r)],{rewriteFileNames:{fileStartNumber:0}});case 4:return u=t.sent,o=(0,Z.g)(u),t.next=8,a.erc721.nextTokenIdToMint();case 8:return p=t.sent,t.next=11,a.storage.uploadBatch(e.map((function(t){return C.a.parse(t)})),{onProgress:null===s||void 0===s?void 0:s.onProgress,rewriteFileNames:{fileStartNumber:p.toNumber()}});case 11:return f=t.sent,d=(0,Z.g)(f),t.next=15,a.contractWrapper.read("getBaseURICount",[]);case 15:return m=t.sent,t.next=18,a.contractWrapper.getChainID();case 18:return y=t.sent,g=l.keccak256(["string","uint256","uint256","address"],[n,y,m,a.contractWrapper.address]),t.next=22,a.contractWrapper.read("encryptDecrypt",[h.Y0(d),g]);case 22:return k=t.sent,x=l.keccak256(["bytes","bytes","uint256"],[h.Y0(d),g,y]),W=v.$.encode(["bytes","bytes32"],[k,x]),t.abrupt("return",w.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"lazyMint",args:[f.length,o.endsWith("/")?o:"".concat(o,"/"),i,W],parse:function(t){for(var r=a.contractWrapper.parseLogs("TokensLazyMinted",null===t||void 0===t?void 0:t.logs),e=r[0].args[1],n=r[0].args[2],c=[],i=function(r){c.push({id:r,receipt:t,data:function(){return a.erc721.getTokenMetadata(r)}})},s=e;s.lte(n);s=s.add(1))i(s);return c}}));case 26:case"end":return t.stop()}}),t)})));return function(r,e,n,a,c){return t.apply(this,arguments)}}())),(0,p.Z)(this,"reveal",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){var n,i,s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new Error("Password is required");case 2:return t.next=4,a.contractWrapper.getChainID();case 4:return n=t.sent,i=l.keccak256(["string","uint256","uint256","address"],[e,n,r,a.contractWrapper.address]),t.prev=6,t.next=9,a.contractWrapper.callStatic().reveal(r,i);case 9:if((s=t.sent).includes("://")&&s.endsWith("/")){t.next=12;break}throw new Error("invalid password");case 12:t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(6),new Error("invalid password");case 17:return t.abrupt("return",w.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"reveal",args:[r,i]}));case 18:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(r,e){return t.apply(this,arguments)}}())),this.erc721=r,this.contractWrapper=e,this.storage=n}return(0,u.Z)(t,[{key:"getMetadataInTier",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e,n,a,i=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.read("getMetadataForAllTiers",[]);case 2:if(e=t.sent,n=e.find((function(t){return t.tier===r}))){t.next=6;break}throw new Error("Tier not found in contract.");case 6:return t.next=8,Promise.all(n.ranges.map((function(t,r){for(var e=[],a=n.baseURIs[r],c=t.startIdInclusive.toNumber();c<t.endIdNonInclusive.toNumber();c++){var s=a.endsWith("/")?"".concat(a).concat(c):"".concat(a,"/").concat(c),u=i.storage.downloadJSON(s);e.push(u)}return e})).flat());case 8:return a=t.sent,t.abrupt("return",a);case 10:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"getTokensInTier",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e,n,a,i=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.read("getTokensInTierLen",[]);case 2:if(!(e=t.sent).eq(0)){t.next=5;break}return t.abrupt("return",[]);case 5:return t.next=7,this.contractWrapper.read("getTokensInTier",[r,0,e]);case 7:return n=t.sent,t.next=10,Promise.all(n.map((function(t){for(var r=[],e=t.startIdInclusive.toNumber();e<t.endIdNonInclusive.toNumber();e++)r.push(i.erc721.get(e));return r})).flat());case 10:return a=t.sent,t.abrupt("return",a);case 12:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"generate",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e,n,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.generateBatch([r]);case 2:return e=t.sent,n=(0,i.Z)(e,1),a=n[0],t.abrupt("return",a);case 6:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"generateBatch",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e,n,a,i=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(r.map((function(t){return q.parseAsync(t)})));case 2:return e=t.sent,t.next=5,this.contractWrapper.getChainID();case 5:return n=t.sent,a=this.contractWrapper.getSigner(),(0,M.Z)(a,"No signer available"),t.next=10,Promise.all(e.map(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=i.contractWrapper,t.t1=a,t.t2={name:"SignatureAction",version:"1",chainId:n,verifyingContract:i.contractWrapper.address},t.t3={GenericRequest:z},t.next=6,i.mapPayloadToContractStruct(r);case 6:return t.t4=t.sent,t.next=9,t.t0.signTypedData.call(t.t0,t.t1,t.t2,t.t3,t.t4);case 9:return e=t.sent,t.abrupt("return",{payload:r,signature:e.toString()});case 11:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}()));case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"verify",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e,n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.mapPayloadToContractStruct(r.payload);case 2:return e=t.sent,t.next=5,this.contractWrapper.read("verify",[e,r.signature]);case 5:return n=t.sent,t.abrupt("return",n[0]);case 7:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"claimWithSignature",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e,n,a,i,s,u,o,p,h,f,d=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.mapPayloadToContractStruct(r.payload);case 2:return e=t.sent,t.next=5,(0,S.n)(this.contractWrapper.getProvider(),r.payload.price,r.payload.currencyAddress);case 5:return n=t.sent,t.next=8,this.contractWrapper.getCallOverrides();case 8:return a=t.sent,t.next=11,(0,C.s)(this.contractWrapper,n,r.payload.currencyAddress,a);case 11:return t.next=13,this.contractWrapper.sendTransaction("claimWithSignature",[e,r.signature],a);case 13:i=t.sent,s=this.contractWrapper.parseLogs("TokensClaimed",null===i||void 0===i?void 0:i.logs),u=s[0].args.startTokenId,o=u.add(s[0].args.quantityClaimed),p=[],h=(0,c.Z)().mark((function t(r){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:p.push({id:r,receipt:i,data:function(){return d.erc721.get(r)}});case 1:case"end":return t.stop()}}),t)})),f=u;case 20:if(!f.lt(o)){t.next=25;break}return t.delegateYield(h(f),"t0",22);case 22:f=f.add(1),t.next=20;break;case 25:return t.abrupt("return",p);case 26:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"mapPayloadToContractStruct",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e,n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,S.n)(this.contractWrapper.getProvider(),r.price,r.currencyAddress);case 2:return e=t.sent,n=v.$.encode(["string[]","address","address","uint256","address","uint256","uint256","address"],[r.tierPriority,r.to,r.royaltyRecipient,r.royaltyBps,r.primarySaleRecipient,r.quantity,e,r.currencyAddress]),t.abrupt("return",{uid:r.uid,validityStartTimestamp:r.mintStartTime,validityEndTimestamp:r.mintEndTime,data:n});case 5:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()}]),t}(),U=(0,u.Z)((function t(r){var e=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",y.cT.name),(0,p.Z)(this,"token",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w.T.fromContractWrapper({contractWrapper:e.contractWrapper,method:"burn",args:[r]}));case 1:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),this.contractWrapper=r}));var _=function(){function t(r,e){var n=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",y.cU.name),(0,p.Z)(this,"to",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e,a){var i,s,u,o,p,h,d;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(i=n.contractWrapper.getSigner())||void 0===i?void 0:i.getAddress();case 2:if(s=t.sent,r===s){t.next=5;break}throw new Error("Zora Drop: Destination address must match connected wallet address");case 5:if(null===a||void 0===a||!a.pricePerToken){t.next=7;break}throw new Error("Zora Drop: Custom pricePerToken is not supported. Price is automatically calculated");case 7:return t.next=9,n.getSaleDetails();case 9:return u=t.sent,o=u.publicSalePrice,c="0.000777",p=m.parseEther(y.cw.parse(c)),h=f.O$.from(o).add(p).mul(e),(d=w.T.fromContractWrapper({contractWrapper:n.contractWrapper,method:"purchase",args:[e],overrides:{value:h}})).setParse((function(t){for(var r=n.contractWrapper.parseLogs("Sale",null===t||void 0===t?void 0:t.logs)[0].args.firstPurchasedTokenId,a=r.add(e),c=[],i=function(r){c.push({id:r,receipt:t,data:function(){return n.erc721.get(r)}})},s=r;s.lt(a);s=s.add(1))i(s);return c})),t.abrupt("return",d);case 16:case"end":return t.stop()}var c}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),this.erc721=r,this.contractWrapper=e}return(0,u.Z)(t,[{key:"getSaleDetails",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.contractWrapper.read("saleDetails",[]));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),V=(0,u.Z)((function t(r){var e=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",y.cV.name),(0,p.Z)(this,"cancel",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w.T.fromContractWrapper({contractWrapper:e.contractWrapper,method:"cancel",args:[r]}));case 1:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),(0,p.Z)(this,"revoke",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w.T.fromContractWrapper({contractWrapper:e.contractWrapper,method:"revoke",args:[r]}));case 1:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),this.contractWrapper=r})),$=(0,u.Z)((function t(r,e){var n=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",y.cW.name),(0,p.Z)(this,"update",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){var a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Z.b)(e,n.storage);case 2:return a=t.sent,t.abrupt("return",w.T.fromContractWrapper({contractWrapper:n.contractWrapper,method:"setTokenURI",args:[r,a]}));case 4:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),this.contractWrapper=r,this.storage=e})),Y=function(){function t(r,e){var n=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",y.cX.name),(0,p.Z)(this,"set",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e,a,s,u,o,p;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=C.B.parse(r)).description=n.sanitizeJSONString(e.description),a=[],(0,T.XT)(e.image)?a.push(n.storage.upload(e.image)):"string"===typeof e.image?a.push(Promise.resolve(e.image)):a.push(Promise.resolve(void 0)),(0,T.XT)(e.animation_url)?a.push(n.storage.upload(e.animation_url)):"string"===typeof e.animation_url?a.push(Promise.resolve(e.animation_url)):a.push(Promise.resolve(void 0)),t.next=7,Promise.all(a);case 7:return s=t.sent,u=(0,i.Z)(s,2),o=u[0],p=u[1],t.abrupt("return",w.T.fromContractWrapper({contractWrapper:n.contractWrapper,method:"setSharedMetadata",args:[{name:"".concat(e.name||""),description:e.description||"",imageURI:o||"",animationURI:p||""}]}));case 12:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),this.contractWrapper=r,this.storage=e}return(0,u.Z)(t,[{key:"get",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.read("sharedMetadata",[]);case 2:if(!(r=t.sent).every((function(t){return""===t}))){t.next=5;break}return t.abrupt("return",void 0);case 5:return t.abrupt("return",{name:r.name,description:r.description,image:r.imageURI,animation_url:r.animationURI});case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"sanitizeJSONString",value:function(t){if(!t)return t;var r=JSON.stringify(t);return r.slice(1,r.length-1)}}]),t}(),J=function(){function t(r,e){var n=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",y.cY.name),(0,p.Z)(this,"mint",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e,a,i,s,u,o,p,h;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.payload,a=r.signature,t.next=4,n.contractWrapper.getCallOverrides();case 4:return i=t.sent,s=function(t){var r=n.contractWrapper.parseLogs("TokensMintedWithSignature",t.logs);if(0===r.length)throw new Error("No MintWithSignature event found");return{id:r[0].args.tokenIdMinted,receipt:t}},t.next=8,n.isLegacyNFTContract();case 8:if(!t.sent){t.next=18;break}return t.next=11,n.mapLegacyPayloadToContractStruct(e);case 11:return u=t.sent,o=u.price,t.next=15,(0,C.s)(n.contractWrapper,o,e.currencyAddress,i);case 15:return t.abrupt("return",w.T.fromContractWrapper({contractWrapper:n.contractWrapper,method:"mintWithSignature",args:[u,a],overrides:i,parse:s}));case 18:return t.next=20,n.mapPayloadToContractStruct(e);case 20:return p=t.sent,h=p.pricePerToken.mul(p.quantity),t.next=24,(0,C.s)(n.contractWrapper,h,e.currencyAddress,i);case 24:return t.abrupt("return",w.T.fromContractWrapper({contractWrapper:n.contractWrapper,method:"mintWithSignature",args:[p,a],overrides:i,parse:s}));case 25:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),(0,p.Z)(this,"mintBatch",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e,a,i,s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.isLegacyNFTContract();case 2:return e=t.sent,t.next=5,Promise.all(r.map((function(t){return e?n.mapLegacyPayloadToContractStruct(t.payload):n.mapPayloadToContractStruct(t.payload)})));case 5:if(a=t.sent.map((function(t,e){var n=r[e],a=n.signature,c=n.payload.price;if(f.O$.from(c).gt(0))throw new Error("Can only batch free mints. For mints with a price, use regular mint()");return{message:t,signature:a}})),i=new b.C(n.contractWrapper),s=a.map((function(t){return i.encode("mintWithSignature",[t.message,t.signature])})),!(0,k.h)("multicall",n.contractWrapper)){t.next=12;break}return t.abrupt("return",w.T.fromContractWrapper({contractWrapper:n.contractWrapper,method:"multicall",args:[s],parse:function(t){var r=n.contractWrapper.parseLogs("TokensMintedWithSignature",t.logs);if(0===r.length)throw new Error("No MintWithSignature event found");return r.map((function(r){return{id:r.args.tokenIdMinted,receipt:t}}))}}));case 12:throw new Error("Multicall not available on this contract!");case 13:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),this.contractWrapper=r,this.storage=e}return(0,u.Z)(t,[{key:"verify",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e,n,a,i,s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isLegacyNFTContract();case 2:if(e=t.sent,n=r.payload,a=r.signature,!e){t.next=14;break}return t.next=8,this.mapLegacyPayloadToContractStruct(n);case 8:return i=t.sent,t.next=11,this.contractWrapper.read("verify",[i,a]);case 11:s=t.sent,t.next=20;break;case 14:return t.next=16,this.mapPayloadToContractStruct(n);case 16:return i=t.sent,t.next=19,this.contractWrapper.read("verify",[i,a]);case 19:s=t.sent;case 20:return t.abrupt("return",s[0]);case 21:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"generate",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.generateBatch([r]);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"generateBatch",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e,a,i,u,o,p,h=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isLegacyNFTContract();case 2:return e=t.sent,t.next=5,Promise.all(r.map((function(t){return I.q.parseAsync(t)})));case 5:return a=t.sent,i=a.map((function(t){return t.metadata})),t.next=9,(0,Z.u)(i,this.storage);case 9:return u=t.sent,t.next=12,this.contractWrapper.getChainID();case 12:return o=t.sent,p=this.contractWrapper.getSigner(),(0,M.Z)(p,"No signer available"),t.next=17,Promise.all(a.map(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,a){var i,s,f;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u[a],t.next=3,I.r.parseAsync((0,n.Z)((0,n.Z)({},r),{},{uri:i}));case 3:if(s=t.sent,!e){t.next=17;break}return t.t0=h.contractWrapper,t.t1=p,t.t2={name:"TokenERC721",version:"1",chainId:o,verifyingContract:h.contractWrapper.address},t.t3={MintRequest:I.s},t.next=11,h.mapLegacyPayloadToContractStruct(s);case 11:return t.t4=t.sent,t.next=14,t.t0.signTypedData.call(t.t0,t.t1,t.t2,t.t3,t.t4);case 14:f=t.sent,t.next=31;break;case 17:return t.t5=h.contractWrapper,t.t6=p,t.t7=o,t.next=22,h.contractWrapper.address;case 22:return t.t8=t.sent,t.t9={name:"SignatureMintERC721",version:"1",chainId:t.t7,verifyingContract:t.t8},t.t10={MintRequest:I.u},t.next=27,h.mapPayloadToContractStruct(s);case 27:return t.t11=t.sent,t.next=30,t.t5.signTypedData.call(t.t5,t.t6,t.t9,t.t10,t.t11);case 30:f=t.sent;case 31:return t.abrupt("return",{payload:s,signature:f.toString()});case 32:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}()));case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"mapPayloadToContractStruct",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,S.n)(this.contractWrapper.getProvider(),r.price,r.currencyAddress);case 2:return e=t.sent,t.abrupt("return",{to:r.to,royaltyRecipient:r.royaltyRecipient,royaltyBps:r.royaltyBps,primarySaleRecipient:r.primarySaleRecipient,uri:r.uri,quantity:r.quantity,pricePerToken:e,currency:r.currencyAddress,validityStartTimestamp:r.mintStartTime,validityEndTimestamp:r.mintEndTime,uid:r.uid});case 4:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"mapLegacyPayloadToContractStruct",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,S.n)(this.contractWrapper.getProvider(),r.price,r.currencyAddress);case 2:return e=t.sent,t.abrupt("return",{to:r.to,price:e,uri:r.uri,currency:r.currencyAddress,validityEndTimestamp:r.mintEndTime,validityStartTimestamp:r.mintStartTime,uid:r.uid,royaltyRecipient:r.royaltyRecipient,royaltyBps:r.royaltyBps,primarySaleRecipient:r.primarySaleRecipient});case 4:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"isLegacyNFTContract",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,k.d)(this.contractWrapper,"ERC721SignatureMintV1"));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),X=function(){function t(r,e,n){var a=this;(0,o.Z)(this,t),(0,p.Z)(this,"featureName",y.cZ.name),(0,p.Z)(this,"transfer",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){var n,s,u,o;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([a.contractWrapper.getSignerAddress(),(0,y.aM)(r)]);case 2:return n=t.sent,s=(0,i.Z)(n,2),u=s[0],o=s[1],t.abrupt("return",w.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"transferFrom(address,address,uint256)",args:[u,o,e]}));case 7:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,p.Z)(this,"transferFrom",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e,n){var s,u,o,p;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,y.aM)(r),(0,y.aM)(e)]);case 2:return s=t.sent,u=(0,i.Z)(s,2),o=u[0],p=u[1],t.abrupt("return",w.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"transferFrom(address,address,uint256)",args:[o,p,n]}));case 7:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),(0,p.Z)(this,"setApprovalForAll",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=w.T,t.t1=a.contractWrapper,t.next=4,(0,y.aM)(r);case 4:return t.t2=t.sent,t.t3=e,t.t4=[t.t2,t.t3],t.t5={contractWrapper:t.t1,method:"setApprovalForAll",args:t.t4},t.abrupt("return",t.t0.fromContractWrapper.call(t.t0,t.t5));case 9:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,p.Z)(this,"setApprovalForToken",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=w.T,t.t1=a.contractWrapper,t.next=4,(0,y.aM)(r);case 4:return t.t2=t.sent,t.t3=e,t.t4=[t.t2,t.t3],t.t5={contractWrapper:t.t1,method:"approve",args:t.t4},t.abrupt("return",t.t0.fromContractWrapper.call(t.t0,t.t5));case 9:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,p.Z)(this,"mint",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a.mintTo,t.next=3,a.contractWrapper.getSignerAddress();case 3:return t.t1=t.sent,t.t2=r,t.abrupt("return",t.t0.prepare.call(t.t0,t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),(0,p.Z)(this,"mintTo",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(a.mintable,y.cO).to.prepare(r,e));case 1:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,p.Z)(this,"mintBatch",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a.mintBatchTo,t.next=3,a.contractWrapper.getSignerAddress();case 3:return t.t1=t.sent,t.t2=r,t.abrupt("return",t.t0.prepare.call(t.t0,t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),(0,p.Z)(this,"mintBatchTo",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(null===(n=a.mintable)||void 0===n?void 0:n.batch,y.cJ).to.prepare(r,e));case 1:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,p.Z)(this,"burn",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(a.burnable,y.cT).token.prepare(r));case 1:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),(0,p.Z)(this,"cancel",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(a.loyaltyCard,y.cV).cancel.prepare(r));case 1:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),(0,p.Z)(this,"revoke",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(a.loyaltyCard,y.cV).revoke.prepare(r));case 1:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),(0,p.Z)(this,"lazyMint",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(a.lazyMintable,y.cM).lazyMint.prepare(r,e));case 1:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,p.Z)(this,"update",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(a.updatableMetadata,y.cW).update.prepare(r,e));case 1:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,p.Z)(this,"claim",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a.claimTo,t.next=3,a.contractWrapper.getSignerAddress();case 3:return t.t1=t.sent,t.t2=r,t.t3=e,t.abrupt("return",t.t0.prepare.call(t.t0,t.t1,t.t2,t.t3));case 7:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,p.Z)(this,"claimTo",(0,w.c)(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e,n){var i,s,u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=a.claimWithConditions,s=a.claimCustom,u=a.claimZora,!i){t.next=5;break}return t.abrupt("return",i.to.prepare(r,e,n));case 5:if(!s){t.next=7;break}return t.abrupt("return",s.to.prepare(r,e,n));case 7:if(!u){t.next=9;break}return t.abrupt("return",u.to.prepare(r,e,n));case 9:throw new y.x(y.cL);case 10:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),this.contractWrapper=r,this.storage=e,this.query=this.detectErc721Enumerable(),this.mintable=this.detectErc721Mintable(),this.burnable=this.detectErc721Burnable(),this.lazyMintable=this.detectErc721LazyMintable(),this.tieredDropable=this.detectErc721TieredDrop(),this.signatureMintable=this.detectErc721SignatureMintable(),this.claimWithConditions=this.detectErc721ClaimableWithConditions(),this.claimCustom=this.detectErc721Claimable(),this.claimZora=this.detectErc721ClaimableZora(),this.erc721SharedMetadata=this.detectErc721SharedMetadata(),this.loyaltyCard=this.detectErc721LoyaltyCard(),this.updatableMetadata=this.detectErc721UpdatableMetadata(),this._chainId=n}return(0,u.Z)(t,[{key:"chainId",get:function(){return this._chainId}},{key:"onNetworkUpdated",value:function(t){this.contractWrapper.updateSignerOrProvider(t)}},{key:"getAddress",value:function(){return this.contractWrapper.address}},{key:"get",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e,a,s,u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.ownerOf(r).catch((function(){return d.d})),this.getTokenMetadata(r).catch((function(){return(0,n.Z)({id:r.toString(),uri:""},Z.F)}))]);case 2:return e=t.sent,a=(0,i.Z)(e,2),s=a[0],u=a[1],t.abrupt("return",{owner:s,metadata:u,type:"ERC721",supply:"1"});case 7:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"ownerOf",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.read("ownerOf",[r]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"balanceOf",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.contractWrapper,t.next=3,(0,y.aM)(r);case 3:return t.t1=t.sent,t.t2=[t.t1],t.next=7,t.t0.read.call(t.t0,"balanceOf",t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"balance",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.contractWrapper.getSignerAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.balanceOf.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isApproved",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){var n,a,s,u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,y.aM)(r),(0,y.aM)(e)]);case 2:return n=t.sent,a=(0,i.Z)(n,2),s=a[0],u=a[1],t.next=8,this.contractWrapper.read("isApprovedForAll",[s,u]);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"getAll",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(this.query,y.cR).all(r));case 1:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"getAllOwners",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(this.query,y.cR).allOwners());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"totalCount",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.nextTokenIdToMint());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"totalCirculatingSupply",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(this.query,y.cR).totalCirculatingSupply());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getOwned",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){var n,a,u,o,p,h,f,d,l=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=4;break}return t.next=3,(0,y.aM)(r);case 3:r=t.sent;case 4:if(null===(n=this.query)||void 0===n||!n.owned){t.next=8;break}return t.abrupt("return",this.query.owned.all(r,e));case 8:return t.next=10,Promise.all([r||this.contractWrapper.getSignerAddress(),this.getAllOwners()]);case 10:return a=t.sent,u=(0,i.Z)(a,2),o=u[0],p=u[1],h=(p||[]).filter((function(t){var r;return(null===o||void 0===o?void 0:o.toLowerCase())===(null===(r=t.owner)||void 0===r?void 0:r.toLowerCase())})),e&&(f=(null===e||void 0===e?void 0:e.start)||0,d=(null===e||void 0===e?void 0:e.count)||Z.D,h=h.slice(f,f+d)),t.next=18,Promise.all(h.map(function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",l.get(r.tokenId));case 1:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}()));case 18:return t.abrupt("return",t.sent);case 19:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"getOwnedTokenIds",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e,n,a,s,u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=4;break}return t.next=3,(0,y.aM)(r);case 3:r=t.sent;case 4:if(null===(e=this.query)||void 0===e||!e.owned){t.next=8;break}return t.abrupt("return",this.query.owned.tokenIds(r));case 8:return t.next=10,Promise.all([r||this.contractWrapper.getSignerAddress(),this.getAllOwners()]);case 10:return n=t.sent,a=(0,i.Z)(n,2),s=a[0],u=a[1],t.abrupt("return",(u||[]).filter((function(t){var r;return(null===s||void 0===s?void 0:s.toLowerCase())===(null===(r=t.owner)||void 0===r?void 0:r.toLowerCase())})).map((function(t){return f.O$.from(t.tokenId)})));case 15:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"getMintTransaction",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.mintTo.prepare(r,e));case 1:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"getClaimTransaction",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r,e,n){var a,i;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.claimWithConditions,i=this.claimCustom,!a){t.next=4;break}return t.abrupt("return",a.conditions.getClaimTransaction(r,e,n));case 4:if(!i){t.next=6;break}return t.abrupt("return",i.getClaimTransaction(r,e,n));case 6:throw new y.x(y.cL);case 7:case"end":return t.stop()}}),t,this)})));return function(r,e,n){return t.apply(this,arguments)}}()},{key:"totalClaimedSupply",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.contractWrapper,!(0,k.h)("totalMinted",r)){t.next=3;break}return t.abrupt("return",this.contractWrapper.read("totalMinted",[]));case 3:if(!(0,k.h)("nextTokenIdToClaim",r)){t.next=5;break}return t.abrupt("return",this.contractWrapper.read("nextTokenIdToClaim",[]));case 5:throw new Error("No function found on contract to get total claimed supply");case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"totalUnclaimedSupply",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(){var r,e,n,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.nextTokenIdToMint(),this.totalClaimedSupply()]);case 2:return r=t.sent,e=(0,i.Z)(r,2),n=e[0],a=e[1],t.abrupt("return",n.sub(a));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"claimConditions",get:function(){return(0,g.a)(this.claimWithConditions,y.cK).conditions}},{key:"tieredDrop",get:function(){return(0,g.a)(this.tieredDropable,y.cS)}},{key:"signature",get:function(){return(0,g.a)(this.signatureMintable,y.cY)}},{key:"revealer",get:function(){var t;return(0,g.a)(null===(t=this.lazyMintable)||void 0===t?void 0:t.revealer,y.cN)}},{key:"sharedMetadata",get:function(){return(0,g.a)(this.erc721SharedMetadata,y.cX)}},{key:"getTokenMetadata",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(r){var e;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.read("tokenURI",[r]);case 2:if(e=t.sent){t.next=5;break}throw new y.n;case 5:return t.abrupt("return",(0,Z.f)(r,e,this.storage));case 6:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"nextTokenIdToMint",value:function(){var t=(0,s.Z)((0,c.Z)().mark((function t(){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,k.h)("nextTokenIdToMint",this.contractWrapper)){t.next=13;break}return t.next=3,this.contractWrapper.read("nextTokenIdToMint",[]);case 3:if(r=t.sent,!(0,k.h)("startTokenId",this.contractWrapper)){t.next=10;break}return t.t0=r,t.next=8,this.contractWrapper.read("startTokenId",[]);case 8:t.t1=t.sent,r=t.t0.sub.call(t.t0,t.t1);case 10:return t.abrupt("return",r);case 13:if(!(0,k.h)("totalSupply",this.contractWrapper)){t.next=19;break}return t.next=16,this.contractWrapper.read("totalSupply",[]);case 16:return t.abrupt("return",t.sent);case 19:throw new Error("Contract requires either `nextTokenIdToMint` or `totalSupply` function available to determine the next token ID to mint");case 20:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"detectErc721Enumerable",value:function(){if((0,k.d)(this.contractWrapper,"ERC721Supply")||(0,k.h)("nextTokenIdToMint",this.contractWrapper))return new D(this,this.contractWrapper)}},{key:"detectErc721Mintable",value:function(){if((0,k.d)(this.contractWrapper,"ERC721Mintable"))return new L(this,this.contractWrapper,this.storage)}},{key:"detectErc721Burnable",value:function(){if((0,k.d)(this.contractWrapper,"ERC721Burnable"))return new U(this.contractWrapper)}},{key:"detectErc721LazyMintable",value:function(){if((0,k.d)(this.contractWrapper,"ERC721LazyMintable"))return new A(this,this.contractWrapper,this.storage)}},{key:"detectErc721TieredDrop",value:function(){if((0,k.d)(this.contractWrapper,"ERC721TieredDrop"))return new F(this,this.contractWrapper,this.storage)}},{key:"detectErc721SignatureMintable",value:function(){if((0,k.d)(this.contractWrapper,"ERC721SignatureMintV1")||(0,k.d)(this.contractWrapper,"ERC721SignatureMintV2"))return new J(this.contractWrapper,this.storage)}},{key:"detectErc721ClaimableWithConditions",value:function(){if((0,k.d)(this.contractWrapper,"ERC721ClaimConditionsV1")||(0,k.d)(this.contractWrapper,"ERC721ClaimConditionsV2")||(0,k.d)(this.contractWrapper,"ERC721ClaimPhasesV1")||(0,k.d)(this.contractWrapper,"ERC721ClaimPhasesV2"))return new R(this,this.contractWrapper,this.storage)}},{key:"detectErc721Claimable",value:function(){if((0,k.d)(this.contractWrapper,"ERC721ClaimCustom"))return new N(this,this.contractWrapper)}},{key:"detectErc721ClaimableZora",value:function(){if((0,k.d)(this.contractWrapper,"ERC721ClaimZora"))return new _(this,this.contractWrapper)}},{key:"detectErc721SharedMetadata",value:function(){if((0,k.d)(this.contractWrapper,"ERC721SharedMetadata"))return new Y(this.contractWrapper,this.storage)}},{key:"detectErc721LoyaltyCard",value:function(){if((0,k.d)(this.contractWrapper,"ERC721LoyaltyCard"))return new V(this.contractWrapper)}},{key:"detectErc721UpdatableMetadata",value:function(){if((0,k.d)(this.contractWrapper,"ERC721UpdatableMetadata"))return new $(this.contractWrapper,this.storage)}}]),t}()}}]);